{"entries":[{"timestamp":1737422047631,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables><variable id=\"`q{Yk:)WO`uXjWRophHI\">moistureRaw</variable><variable id=\"Fw-RMyVJ1%ML?*Q@edL[\">PIN_MOISTURE</variable><variable id=\"JCe/_@$r|V`~uJYs984*\">waterDetected</variable><variable id=\"},A{(mSUSJR|Dc.9q.yq\">PIN_WATER</variable><variable id=\"p$i$Sr6.OSTRm[mOY7}L\">moisture</variable></variables><block type=\"device_forever\" x=\"586\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Boucle principale</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`q{Yk:)WO`uXjWRophHI\">moistureRaw</field><comment pinned=\"false\" h=\"80\" w=\"160\">Lecture des valeurs</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_analog_pin\"><value name=\"name\"><shadow type=\"analog_read_write_pin_shadow\"><field name=\"pin\">AnalogReadWritePin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Fw-RMyVJ1%ML?*Q@edL[\">PIN_MOISTURE</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"JCe/_@$r|V`~uJYs984*\">waterDetected</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"},A{(mSUSJR|Dc.9q.yq\">PIN_WATER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p$i$Sr6.OSTRm[mOY7}L\">moisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion de l'humidité</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"convertMoisture\" functionid=\"PAaE*KoWzpf*Oh)]+e`H\"><arg name=\"rawValue\" id=\"0mofvx2q5848zaqutmewe\" type=\"number\"></arg></mutation><value name=\"0mofvx2q5848zaqutmewe\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`q{Yk:)WO`uXjWRophHI\">moistureRaw</field></block></value></block></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi des données sur le port série</comment><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">moisture.toString()</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">waterDetected.toString()</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"\\n\"</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Affichage sur la matrice LED selon la présence d'eau</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JCe/_@$r|V`~uJYs984*\">waterDetected</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></statement><statement name=\"ELSE\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Pause de 2 secondes</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"39\" y=\"68\"><statement name=\"HANDLER\"><block type=\"serial_setbaudrate\"><field name=\"rate\">BaudRate.BaudRate115200</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de la communication série</comment><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"Démarrage du capteur EARTH\\n\"</field></block></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"Moisture,WaterDetected\\n\"</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Fw-RMyVJ1%ML?*Q@edL[\">PIN_MOISTURE</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définition des broches\nSignal analogique humidité sur P0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"analog_pin\"><field name=\"pin\">AnalogPin.P0</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"},A{(mSUSJR|Dc.9q.yq\">PIN_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P1</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P1</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1352\" y=\"20\"><mutation name=\"convertMoisture\" functionid=\"PAaE*KoWzpf*Oh)]+e`H\"><arg name=\"rawValue\" id=\"0mofvx2q5848zaqutmewe\" type=\"number\"></arg></mutation><field name=\"function_name\">convertMoisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P1\nFonction de conversion pour l'humidité</comment><value name=\"0mofvx2q5848zaqutmewe\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">rawValue</field></block></value><statement name=\"STACK\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion en pourcentage (0-100%)</comment><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">rawValue</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">1023</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value></block></statement></block>"],[1,"www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n"],[0,"</xm"]],"start1":12,"start2":12,"length1":6791,"length2":113}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"// Signal digital détection d'eau sur P1\n// Fonction de conversion pour l'humidité\nfunction convertMoisture (rawValue: number) {\n    // Conversion en pourcentage (0-100%)\n    return Math.map(rawValue, 0, 1023, 0, 100)\n}\nlet moisture = 0\nlet waterDetected = 0\nlet moistureRaw = 0\n// Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"\" + (\"Démarrage du capteur EARTH\\n\"))\n// En-tête CSV\nserial.writeString(\"\" + (\"Moisture,WaterDetected\\n\"))\n// Définition des broches\n// Signal analogique humidité sur P0\nlet PIN_MOISTURE = AnalogPin.P0\n// Signal digital détection d'eau sur P1\nlet PIN_WATER = DigitalPin.P1\n// Boucle principale\nbasic.forever(function () {\n    // Lecture des valeurs\n    moistureRaw = pins.analogReadPin(PIN_MOISTURE)\n    waterDetected = pins.digitalReadPin(PIN_WATER)\n    // Conversion de l'humidité\n    moisture = convertMoisture(moistureRaw)\n    // Envoi des données sur le port série\n    serial.writeString(\"\" + (moisture.toString()))\n    serial.writeString(\",\")\n    serial.writeString(\"\" + (waterDetected.toString()))\n    serial.writeString(\"\" + (\"\\n\"))\n    // Affichage sur la matrice LED selon la présence d'eau\n    if (waterDetected == 1) {\n        basic.showIcon(IconNames.Yes)\n    } else {\n        basic.showIcon(IconNames.No)\n    }\n    // Pause de 2 secondes\n    basic.pause(2000)\n})"],[0,"\n"]],"start1":0,"start2":0,"length1":1364,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"blocksprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":229,"start2":229,"length1":36,"length2":31}]}]},{"timestamp":1737422630667,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"x=\"5"],[-1,"47"],[1,"86"],[0,"\" y=\""],[-1,"-48"],[1,"20"],[0,"\"><c"]],"start1":395,"start2":395,"length1":18,"length2":17},{"diffs":[[0," x=\""],[-1,"0"],[1,"39"],[0,"\" y=\""],[-1,"0"],[1,"68"],[0,"\"><s"]],"start1":3981,"start2":3981,"length1":15,"length2":17},{"diffs":[[0,"logPin.P"],[-1,"1"],[1,"0"],[0,"</field>"]],"start1":4928,"start2":4928,"length1":17,"length2":17},{"diffs":[[0,"in\">DigitalPin.P"],[-1,"0"],[1,"1"],[0,"</field></block>"]],"start1":5265,"start2":5265,"length1":33,"length2":33},{"diffs":[[0,"=\"13"],[-1,"13"],[1,"52"],[0,"\" y=\""],[-1,"-48"],[1,"20"],[0,"\"><m"]],"start1":5429,"start2":5429,"length1":18,"length2":17}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"logPin.P"],[-1,"1"],[1,"0"],[0,"\n// Sign"]],"start1":579,"start2":579,"length1":17,"length2":17},{"diffs":[[0,"DigitalPin.P"],[-1,"0"],[1,"1"],[0,"\n// Boucle p"]],"start1":646,"start2":646,"length1":25,"length2":25}]}]},{"timestamp":1737422975553,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":244,"start2":244,"length1":17,"length2":21}]}]},{"timestamp":1737423779644,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"// Signal digital détection d'eau sur P1\n// Fonction de conversion pour l'humidité\nfunction convertMoisture (rawValue: number) {\n    // Conversion en pourcentage (0-100%)\n    return Math.map(rawValue, 0, 1023, 0, 100)\n}\nlet moisture = 0\nlet waterDetected = 0\nlet moistureRaw = 0\n"],[0,"// Initi"]],"start1":0,"start2":0,"length1":8,"length2":287},{"diffs":[[0,"teString"],[1,"(\"\" + "],[0,"(\"Démarr"]],"start1":377,"start2":377,"length1":16,"length2":22},{"diffs":[[0,"ARTH\\n\")"],[1,")\n// En-tête CSV"],[0,"\nserial."]],"start1":415,"start2":415,"length1":16,"length2":32},{"diffs":[[0,"teString"],[1,"(\"\" + "],[0,"(\"Moistu"]],"start1":450,"start2":450,"length1":16,"length2":22},{"diffs":[[0,"cted\\n\")"],[-1,"\n"],[1,")"],[0,"\n// Défi"]],"start1":484,"start2":484,"length1":17,"length2":17},{"diffs":[[0,"hes\n"],[-1,"let PIN_MOISTURE = AnalogPin.P0    "],[0,"// S"]],"start1":516,"start2":516,"length1":43,"length2":8},{"diffs":[[0,"humidité"],[1," sur P0"],[0,"\nlet PIN"]],"start1":541,"start2":541,"length1":16,"length2":23},{"diffs":[[0,"PIN_"],[-1,"WATER = DigitalPin.P1      "],[1,"MOISTURE = AnalogPin.P1\n"],[0,"// S"]],"start1":561,"start2":561,"length1":35,"length2":32},{"diffs":[[0,"'eau"],[-1,"\n\n// Constantes de calibration\nlet MOISTURE_AIR = 99    // Valeur dans l'air (sec)\nlet MOISTURE_WATER = 47  // Valeur dans l'eau\n\n// Fonction de conversion pour l'humidité\nfunction convertMoisture(rawValue: number): number {\n    // Conversion en pourcentage avec inversion de l'échelle\n    // et limitation entre 0 et 100%\n    let humidity = Math.map(\n        rawValue,\n        MOISTURE_AIR,    // Valeur minimale (air)\n        MOISTURE_WATER,  // Valeur maximale (eau)\n        0,              // 0% d'humidité\n        100            // 100% d'humidité\n    )\n    // Limiter les valeurs entre 0 et 100\n    if (humidity < 0) humidity = 0\n    if (humidity > 100) humidity = 100\n    return Math.round(humidity)\n}\n"],[1," sur P1\nlet PIN_WATER = DigitalPin.P0"],[0,"\n// "]],"start1":618,"start2":618,"length1":717,"length2":45},{"diffs":[[0,"valeurs\n    "],[-1,"let "],[0,"moistureRaw "]],"start1":728,"start2":728,"length1":28,"length2":24},{"diffs":[[0,"RE)\n    "],[-1,"let "],[0,"waterDet"]],"start1":783,"start2":783,"length1":20,"length2":16},{"diffs":[[0,"_WATER)\n"],[-1,"\n"],[0,"    // C"]],"start1":830,"start2":830,"length1":17,"length2":16},{"diffs":[[0,"ité\n    "],[-1,"let "],[0,"moisture"]],"start1":866,"start2":866,"length1":20,"length2":16},{"diffs":[[0,"ureRaw)\n"],[-1,"\n"],[0,"    // E"]],"start1":906,"start2":906,"length1":17,"length2":16},{"diffs":[[0,"teString"],[1,"(\"\" + "],[0,"(moistur"]],"start1":971,"start2":971,"length1":16,"length2":22},{"diffs":[[0,"ture.toString())"],[1,")"],[0,"\n    serial.writ"]],"start1":990,"start2":990,"length1":32,"length2":33},{"diffs":[[0,"teString"],[1,"(\"\" + "],[0,"(waterDe"]],"start1":1050,"start2":1050,"length1":16,"length2":22},{"diffs":[[0,"tring())"],[1,")"],[0,"\n    ser"]],"start1":1082,"start2":1082,"length1":16,"length2":17},{"diffs":[[0,"ring"],[1,"(\"\" + "],[0,"(\"\\n\")"],[-1,"\n"],[1,")"],[0,"\n   "]],"start1":1110,"start2":1110,"length1":15,"length2":21},{"diffs":[[0,"on l"],[-1,"e niveau d'humidité\n    if (moisture < 20) {\n        basic.showIcon(IconNames.Dry)       // Très sec\n    } else if (moisture < 40) {\n        basic.showIcon(IconNames.Small_Square) // Un peu humide\n    } else if (moisture < 60) {\n        basic.showIcon(IconNames.Square)    // Moyennement humide\n    } else if (moisture < 80"],[1,"a présence d'eau\n    if (waterDetected == 1"],[0,") {\n"]],"start1":1167,"start2":1167,"length1":331,"length2":51},{"diffs":[[0,"mes."],[-1,"Target)    // Humide"],[1,"Yes)"],[0,"\n   "]],"start1":1247,"start2":1247,"length1":28,"length2":12},{"diffs":[[0,"mes."],[-1,"Umbrella)  // Très humide"],[1,"No)"],[0,"\n    }\n"],[-1,"\n"],[0,"    "]],"start1":1298,"start2":1298,"length1":41,"length2":18},{"diffs":[[0,"2000)\n})"],[1,"\n"]],"start1":1355,"start2":1355,"length1":8,"length2":9}]}]},{"timestamp":1737423784451,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"RlUOOwp-F1QVE1*k(TXc\">humidity</variable><variable id=\"H%~Fy%_F:XntQ_EZ!@*F\">MOISTURE_AIR</variable><variable id=\"DZB4H@,B]i1I58OrEI_(\">MOISTURE_WATER</variable><variable id=\"==iSmSEv:4ZvF!!La`v$"],[1,"`q{Yk:)WO`uXjWRophHI"],[0,"\">mo"]],"start1":76,"start2":76,"length1":203,"length2":28},{"diffs":[[0,"ble id=\""],[-1,"Bdvg~03_iCtNRsH^X0A~"],[1,"Fw-RMyVJ1%ML?*Q@edL["],[0,"\">PIN_MO"]],"start1":130,"start2":130,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"Qz7|+ABWTKRbxiGjwveH"],[1,"JCe/_@$r|V`~uJYs984*"],[0,"\">waterD"]],"start1":189,"start2":189,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"7hEyFC?,IhXw1]CDD;yO"],[1,"},A{(mSUSJR|Dc.9q.yq"],[0,"\">PIN_WA"]],"start1":249,"start2":249,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"VFV)-fU@dz!80mqlA[?z"],[1,"p$i$Sr6.OSTRm[mOY7}L"],[0,"\">moistu"]],"start1":305,"start2":305,"length1":36,"length2":36},{"diffs":[[0,"es><"],[-1,"comment x=\"-1.067708333333286\" y=\"-110.85069444444444\" w=\"396.36712646484375\" h=\"100.3428726196289\">CAPTEUR EARTH\nD out =&gt; P0 (Digital [0,1])\nA out =&gt; P1 (Analogique [0..1023]</comment><"],[0,"bloc"]],"start1":363,"start2":363,"length1":200,"length2":8},{"diffs":[[0,"x=\"5"],[-1,"52"],[1,"47"],[0,"\" y=\"-4"],[-1,"5"],[1,"8"],[0,"\"><c"]],"start1":395,"start2":395,"length1":18,"length2":18},{"diffs":[[0,"AR\" id=\""],[-1,"==iSmSEv:4ZvF!!La`v$"],[1,"`q{Yk:)WO`uXjWRophHI"],[0,"\">moistu"]],"start1":545,"start2":545,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"Bdvg~03_iCtNRsH^X0A~"],[1,"Fw-RMyVJ1%ML?*Q@edL["],[0,"\">PIN_MO"]],"start1":942,"start2":942,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"Qz7|+ABWTKRbxiGjwveH"],[1,"JCe/_@$r|V`~uJYs984*"],[0,"\">wa"]],"start1":1076,"start2":1076,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"7hEyFC?,IhXw1]CDD;yO"],[1,"},A{(mSUSJR|Dc.9q.yq"],[0,"\">PIN_WA"]],"start1":1386,"start2":1386,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"VFV)-fU@dz!80mqlA[?z"],[1,"p$i$Sr6.OSTRm[mOY7}L"],[0,"\">moistu"]],"start1":1513,"start2":1513,"length1":36,"length2":36},{"diffs":[[0,"tionid=\""],[-1,"%$v~q,;iCPcPu;V/,_AG"],[1,"PAaE*KoWzpf*Oh)]+e`H"],[0,"\"><arg n"]],"start1":1787,"start2":1787,"length1":36,"length2":36},{"diffs":[[0,"ue\" id=\""],[-1,"q5ajjsn9b2cfe1sgqeks7"],[1,"0mofvx2q5848zaqutmewe"],[0,"\" type=\""]],"start1":1834,"start2":1834,"length1":37,"length2":37},{"diffs":[[0,"e name=\""],[-1,"q5ajjsn9b2cfe1sgqeks7"],[1,"0mofvx2q5848zaqutmewe"],[0,"\"><shado"]],"start1":1901,"start2":1901,"length1":37,"length2":37},{"diffs":[[0,"id=\""],[-1,"==iSmSEv:4ZvF!!La`v$"],[1,"`q{Yk:)WO`uXjWRophHI"],[0,"\">mo"]],"start1":2041,"start2":2041,"length1":28,"length2":28},{"diffs":[[0,"tion"],[-1," elseif=\"3\""],[0," els"]],"start1":2838,"start2":2838,"length1":19,"length2":8},{"diffs":[[0,"on l"],[-1,"e niveau d'humidité\nTrès sec</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VFV)-fU@dz!80mqlA[?z\">moisture</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VFV)-fU@dz!80mqlA[?z\">moisture</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Triangle</field><comment pinned=\"false\" h=\"80\" w=\"160\">Un peu humide</comment></block></statement><value name=\"IF2"],[1,"a présence d'eau</comment><value name=\"IF0"],[0,"\"><s"]],"start1":2934,"start2":2934,"length1":1204,"length2":50},{"diffs":[[0,"field name=\"OP\">"],[-1,"LT"],[1,"EQ"],[0,"</field><value n"]],"start1":3080,"start2":3080,"length1":34,"length2":34},{"diffs":[[0,"id=\""],[-1,"VFV)-fU@dz!80mqlA[?z\">moisture</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">60</field></shadow></value></block></value><statement name=\"DO2\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Square</field><comment pinned=\"false\" h=\"80\" w=\"160\">Moyennement humide</comment></block></statement><value name=\"IF3\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VFV)-fU@dz!80mqlA[?z\">moisture"],[1,"JCe/_@$r|V`~uJYs984*\">waterDetected"],[0,"</fi"]],"start1":3231,"start2":3231,"length1":646,"length2":43},{"diffs":[[0,"e=\"NUM\">"],[-1,"80"],[1,"1"],[0,"</field>"]],"start1":3347,"start2":3347,"length1":18,"length2":17},{"diffs":[[0,"name=\"DO"],[-1,"3"],[1,"0"],[0,"\"><block"]],"start1":3408,"start2":3408,"length1":17,"length2":17},{"diffs":[[0,"mes."],[-1,"Target"],[1,"Yes"],[0,"</fi"]],"start1":3471,"start2":3471,"length1":14,"length2":11},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Humide</comment><"],[0,"/blo"]],"start1":3483,"start2":3483,"length1":63,"length2":8},{"diffs":[[0,"mes."],[-1,"Umbrella"],[1,"No"],[0,"</fi"]],"start1":3581,"start2":3581,"length1":16,"length2":10},{"diffs":[[0,"ld><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">Très humide</comment><"],[0,"/blo"]],"start1":3592,"start2":3592,"length1":68,"length2":8},{"diffs":[[0,"l_writestring\"><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><"],[0,"value name=\"text"]],"start1":4390,"start2":4390,"length1":32,"length2":92},{"diffs":[[0,"id=\""],[-1,"Bdvg~03_iCtNRsH^X0A~"],[1,"Fw-RMyVJ1%ML?*Q@edL["],[0,"\">PI"]],"start1":4647,"start2":4647,"length1":28,"length2":28},{"diffs":[[0,"logique humidité"],[1," sur P0"],[0,"</comment><value"]],"start1":4765,"start2":4765,"length1":32,"length2":39},{"diffs":[[0,"id=\""],[-1,"7hEyFC?,IhXw1]CDD;yO"],[1,"},A{(mSUSJR|Dc.9q.yq"],[0,"\">PI"]],"start1":5012,"start2":5012,"length1":28,"length2":28},{"diffs":[[0,"ection d'eau"],[1," sur P1"],[0,"</comment><v"]],"start1":5112,"start2":5112,"length1":24,"length2":31},{"diffs":[[0,"ue><"],[-1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"H%~Fy%_F:XntQ_EZ!@*F\">MOISTURE_AIR</field><comment pinned=\"false\" h=\"80\" w=\"160\">Constantes de calibration\nValeur dans l'air (sec)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">99</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"DZB4H@,B]i1I58OrEI_(\">MOISTURE_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Valeur dans l'eau</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">47</field></shadow></value><"],[0,"/blo"]],"start1":5302,"start2":5302,"length1":554,"length2":8},{"diffs":[[0,"k></"],[-1,"next></block></next></block></"],[0,"stat"]],"start1":5371,"start2":5371,"length1":38,"length2":8},{"diffs":[[0,"\"131"],[-1,"8"],[1,"3"],[0,"\" y=\"-4"],[-1,"5"],[1,"8"],[0,"\"><m"]],"start1":5429,"start2":5429,"length1":17,"length2":17},{"diffs":[[0,"id=\""],[-1,"%$v~q,;iCPcPu;V/,_AG"],[1,"PAaE*KoWzpf*Oh)]+e`H"],[0,"\"><a"]],"start1":5485,"start2":5485,"length1":28,"length2":28},{"diffs":[[0,"ue\" id=\""],[-1,"q5ajjsn9b2cfe1sgqeks7"],[1,"0mofvx2q5848zaqutmewe"],[0,"\" type=\""]],"start1":5528,"start2":5528,"length1":37,"length2":37},{"diffs":[[0,"60\">"],[-1,"Valeur dans l'eau"],[1,"Signal digital détection d'eau sur P1"],[0,"\nFon"]],"start1":5676,"start2":5676,"length1":25,"length2":45},{"diffs":[[0,"me=\""],[-1,"q5ajjsn9b2cfe1sgqeks7"],[1,"0mofvx2q5848zaqutmewe"],[0,"\"><b"]],"start1":5775,"start2":5775,"length1":29,"length2":29},{"diffs":[[0,"pe=\""],[-1,"variables_set\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field"],[1,"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation"],[0,"><co"]],"start1":5970,"start2":5970,"length1":82,"length2":106},{"diffs":[[0,"age "],[-1,"avec inversion de l'échelle\net limitation entre 0 et "],[1,"(0-"],[0,"100%"],[1,")"],[0,"</co"]],"start1":6134,"start2":6134,"length1":65,"length2":16},{"diffs":[[0,"nt><value name=\""],[1,"RETURN_"],[0,"VALUE\"><shadow t"]],"start1":6153,"start2":6153,"length1":32,"length2":39},{"diffs":[[0,"w\"><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"H%~Fy%_F:XntQ_EZ!@*F\">MOISTURE_AIR</field></block></value><value name=\"fromHigh\"><block type=\"variables_get\"><field name=\"VAR\" id=\"DZB4H@,B]i1I58OrEI_(\">MOISTURE_WATER</field></block></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Limiter les valeurs entre 0 et 100</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">round</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field></block></value></block></value></block></next></block></next></block></next"],[1,"shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">1023</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value"],[0,"></b"]],"start1":6399,"start2":6399,"length1":2410,"length2":375}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[1,"// Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"Démarrage du capteur EARTH\\n\")\nserial.writeString(\"Moisture,WaterDetected\\n\")\n\n// Définition des broches\nlet PIN_MOISTURE = AnalogPin.P0    // Signal analogique humidité\nlet PIN_WATER = DigitalPin.P1      // Signal digital détection d'eau\n\n// Constantes de calibration\nlet MOISTURE_AIR = 99    // Valeur dans l'air (sec)\nlet MOISTURE_WATER = 47  "],[0,"// Valeur dans l'eau\n// Fonc"]],"start1":0,"start2":0,"length1":28,"length2":482},{"diffs":[[0,"s l'eau\n"],[1,"\n"],[0,"// Fonct"]],"start1":467,"start2":467,"length1":16,"length2":17},{"diffs":[[0,"Moisture"],[-1," "],[0,"(rawValu"]],"start1":534,"start2":534,"length1":17,"length2":16},{"diffs":[[0," number)"],[1,": number"],[0," {\n    /"]],"start1":552,"start2":552,"length1":16,"length2":24},{"diffs":[[0,"et 100%\n    "],[1,"let "],[0,"humidity = M"]],"start1":661,"start2":661,"length1":24,"length2":28},{"diffs":[[0,"ath.map("],[1,"\n        "],[0,"rawValue"]],"start1":689,"start2":689,"length1":16,"length2":25},{"diffs":[[0,"awValue,"],[1,"\n       "],[0," MOISTUR"]],"start1":707,"start2":707,"length1":16,"length2":24},{"diffs":[[0,"IR, "],[-1,"MOISTURE_WATER, 0, 100)\n    // Limiter les valeurs entre 0 et 100\n    if (humidity < 0) {\n        humidity = 0\n    }\n    if (humidity > 100) {\n        humidity = 100\n"],[1,"   // Valeur minimale (air)\n        MOISTURE_WATER,  // Valeur maximale (eau)\n        0,              // 0% d'humidité\n        100     "],[0,"    "],[-1,"}\n"],[0,"   "],[-1," return Math.round(humidity)\n}\n/**\n * CAPTEUR EARTH\n * \n * D out => P0 (Digital [0,1])\n * \n * A out => P1 (Analogique [0..1023]\n */\nlet moisture = 0\nlet waterDetected = 0\nlet moistureRaw = 0\nlet "],[1,"// 100% d'humidité\n    )\n    // Limiter les valeurs entre 0 et 100\n    if ("],[0,"humi"]],"start1":734,"start2":734,"length1":378,"length2":225},{"diffs":[[0,"ity "],[-1,"= 0\nlet MOISTURE_WATER = 0\nlet MOISTURE_AIR = 0\n// Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"\" + (\"Démarrage du capteur EARTH\\n\"))\nserial.writeString(\"\" + (\"Moisture,WaterDetected\\n\"))\n// Définition des broches\n// Signal analogique humidité\nlet PIN_MOISTURE = AnalogPin.P1\n// Signal digital détection d'eau\nlet PIN_WATER = DigitalPin.P0\n// Constantes de calibration\n// Valeur dans l'air (sec)\nMOISTURE_AIR = 99\n// Valeur dans l'eau\nMOISTURE_WATER = 47"],[1,"< 0) humidity = 0\n    if (humidity > 100) humidity = 100\n    return Math.round(humidity)\n}\n"],[0,"\n// "]],"start1":960,"start2":960,"length1":522,"length2":99},{"diffs":[[0,"valeurs\n    "],[1,"let "],[0,"moistureRaw "]],"start1":1124,"start2":1124,"length1":24,"length2":28},{"diffs":[[0,"RE)\n    "],[1,"let "],[0,"waterDet"]],"start1":1183,"start2":1183,"length1":16,"length2":20},{"diffs":[[0,"_WATER)\n"],[1,"\n"],[0,"    // C"]],"start1":1234,"start2":1234,"length1":16,"length2":17},{"diffs":[[0,"ité\n    "],[1,"let "],[0,"moisture"]],"start1":1271,"start2":1271,"length1":16,"length2":20},{"diffs":[[0,"ureRaw)\n"],[1,"\n"],[0,"    // E"]],"start1":1315,"start2":1315,"length1":16,"length2":17},{"diffs":[[0,"teString"],[-1,"(\"\" + "],[0,"(moistur"]],"start1":1381,"start2":1381,"length1":22,"length2":16},{"diffs":[[0,"ture.toString())"],[-1,")"],[0,"\n    serial.writ"]],"start1":1394,"start2":1394,"length1":33,"length2":32},{"diffs":[[0,"teString"],[-1,"(\"\" + "],[0,"(waterDe"]],"start1":1453,"start2":1453,"length1":22,"length2":16},{"diffs":[[0,"tring())"],[-1,")"],[0,"\n    ser"]],"start1":1479,"start2":1479,"length1":17,"length2":16},{"diffs":[[0,"ring"],[-1,"(\"\" + "],[0,"(\"\\n\")"],[-1,")"],[1,"\n"],[0,"\n   "]],"start1":1506,"start2":1506,"length1":21,"length2":15},{"diffs":[[0,"ité\n"],[-1,"    // Très sec\n"],[0,"    "]],"start1":1577,"start2":1577,"length1":24,"length2":8},{"diffs":[[0,"mes."],[-1,"No)"],[1,"Dry)       // Très sec"],[0,"\n   "]],"start1":1635,"start2":1635,"length1":11,"length2":30},{"diffs":[[0,"    "],[-1,"// Un peu humide\n        basic.showIcon(IconNames.Triangle)"],[1,"basic.showIcon(IconNames.Small_Square) // Un peu humide"],[0,"\n   "]],"start1":1698,"start2":1698,"length1":67,"length2":63},{"diffs":[[0,") {\n"],[-1,"        // Moyennement humide\n"],[0,"    "]],"start1":1786,"start2":1786,"length1":38,"length2":8},{"diffs":[[0,".Square)"],[1,"    // Moyennement humide"],[0,"\n    } e"]],"start1":1822,"start2":1822,"length1":16,"length2":41},{"diffs":[[0,") {\n"],[-1,"        // Humide\n"],[0,"    "]],"start1":1884,"start2":1884,"length1":26,"length2":8},{"diffs":[[0,"get)"],[-1,"\n"],[0,"    "],[-1,"} else {\n        // Très humide"],[1,"// Humide\n    } else {"],[0,"\n   "]],"start1":1924,"start2":1924,"length1":44,"length2":34},{"diffs":[[0,"lla)"],[1,"  // Très humide"],[0,"\n    }\n"],[1,"\n"],[0,"    "]],"start1":1993,"start2":1993,"length1":15,"length2":32},{"diffs":[[0,"2000)\n})"],[-1,"\n"]],"start1":2064,"start2":2064,"length1":9,"length2":8}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":244,"start2":244,"length1":21,"length2":17}]}]},{"timestamp":1737424354556,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"6Df`+?*U#v%%-((*O,u6"],[1,"RlUOOwp-F1QVE1*k(TXc\">humidity</variable><variable id=\"H%~Fy%_F:XntQ_EZ!@*F\">MOISTURE_AIR</variable><variable id=\"DZB4H@,B]i1I58OrEI_(\">MOISTURE_WATER</variable><variable id=\"==iSmSEv:4ZvF!!La`v$"],[0,"\">moistu"]],"start1":72,"start2":72,"length1":36,"length2":211},{"diffs":[[0,"ble id=\""],[-1,"#iF@C6:p{Ph9%%c5$uut"],[1,"Bdvg~03_iCtNRsH^X0A~"],[0,"\">PIN_MO"]],"start1":305,"start2":305,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"{2vxWMAgS0uhwBuYYy5~"],[1,"Qz7|+ABWTKRbxiGjwveH"],[0,"\">waterD"]],"start1":364,"start2":364,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"WMmXsJ|ykdcfV_g$Qkd7"],[1,"7hEyFC?,IhXw1]CDD;yO"],[0,"\">PIN_WA"]],"start1":424,"start2":424,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"#[`vd@+PqdJe{NDn-qP^"],[1,"VFV)-fU@dz!80mqlA[?z"],[0,"\">moistu"]],"start1":480,"start2":480,"length1":36,"length2":36},{"diffs":[[0,"iables><"],[1,"comment x=\"-1.067708333333286\" y=\"-110.85069444444444\" w=\"396.36712646484375\" h=\"100.3428726196289\">CAPTEUR EARTH\nD out =&gt; P0 (Digital [0,1])\nA out =&gt; P1 (Analogique [0..1023]</comment><"],[0,"block ty"]],"start1":534,"start2":534,"length1":16,"length2":208},{"diffs":[[0,"x=\"5"],[-1,"4"],[0,"5"],[1,"2"],[0,"\" y=\"-4"],[-1,"9"],[1,"5"],[0,"\"><c"]],"start1":762,"start2":762,"length1":18,"length2":18},{"diffs":[[0,"AR\" id=\""],[-1,"6Df`+?*U#v%%-((*O,u6"],[1,"==iSmSEv:4ZvF!!La`v$"],[0,"\">moistu"]],"start1":912,"start2":912,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"#iF@C6:p{Ph9%%c5$uut"],[1,"Bdvg~03_iCtNRsH^X0A~"],[0,"\">PIN_MO"]],"start1":1309,"start2":1309,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"{2vxWMAgS0uhwBuYYy5~"],[1,"Qz7|+ABWTKRbxiGjwveH"],[0,"\">waterD"]],"start1":1439,"start2":1439,"length1":36,"length2":36},{"diffs":[[0,"AR\" id=\""],[-1,"WMmXsJ|ykdcfV_g$Qkd7"],[1,"7hEyFC?,IhXw1]CDD;yO"],[0,"\">PIN_WA"]],"start1":1753,"start2":1753,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"#[`vd@+PqdJe{NDn-qP^"],[1,"VFV)-fU@dz!80mqlA[?z"],[0,"\">mo"]],"start1":1884,"start2":1884,"length1":28,"length2":28},{"diffs":[[0,"tionid=\""],[-1,"Q(TQj1|^B]v+cVq!a^En"],[1,"%$v~q,;iCPcPu;V/,_AG"],[0,"\"><arg n"]],"start1":2154,"start2":2154,"length1":36,"length2":36},{"diffs":[[0,"ue\" id=\""],[-1,"zt3fyr08njcvkp3352fv"],[1,"q5ajjsn9b2cfe1sgqeks7"],[0,"\" type=\""]],"start1":2201,"start2":2201,"length1":36,"length2":37},{"diffs":[[0,"e name=\""],[-1,"zt3fyr08njcvkp3352fv"],[1,"q5ajjsn9b2cfe1sgqeks7"],[0,"\"><shado"]],"start1":2268,"start2":2268,"length1":36,"length2":37},{"diffs":[[0,"id=\""],[-1,"6Df`+?*U#v%%-((*O,u6"],[1,"==iSmSEv:4ZvF!!La`v$"],[0,"\">mo"]],"start1":2408,"start2":2408,"length1":28,"length2":28},{"diffs":[[0,"mutation"],[1," elseif=\"3\""],[0," else=\"1"]],"start1":3201,"start2":3201,"length1":16,"length2":27},{"diffs":[[0,"on l"],[-1,"a présence d'eau</com"],[1,"e niveau d'humidité\nTrès sec</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VFV)-fU@dz!80mqlA[?z\">moisture</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></state"],[0,"ment"]],"start1":3312,"start2":3312,"length1":29,"length2":578},{"diffs":[[0,"><value name=\"IF"],[-1,"0"],[1,"1"],[0,"\"><shadow type=\""]],"start1":3890,"start2":3890,"length1":33,"length2":33},{"diffs":[[0,"OP\">"],[-1,"EQ"],[1,"LT"],[0,"</fi"]],"start1":4019,"start2":4019,"length1":10,"length2":10},{"diffs":[[0,"id=\""],[-1,"{2vxWMAgS0uhwBuYYy5~\">waterDetected"],[1,"VFV)-fU@dz!80mqlA[?z\">moisture</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Triangle</field><comment pinned=\"false\" h=\"80\" w=\"160\">Un peu humide</comment></block></statement><value name=\"IF2\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VFV)-fU@dz!80mqlA[?z\">moisture"],[0,"</fi"]],"start1":4158,"start2":4158,"length1":43,"length2":643},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"1"],[1,"60"],[0,"</field></shadow"]],"start1":4866,"start2":4866,"length1":33,"length2":34},{"diffs":[[0,"atement name=\"DO"],[-1,"0"],[1,"2"],[0,"\"><block type=\"b"]],"start1":4928,"start2":4928,"length1":33,"length2":33},{"diffs":[[0,"mes."],[-1,"Umbrella</field"],[1,"Square</field><comment pinned=\"false\" h=\"80\" w=\"160\">Moyennement humide</comment></block></statement><value name=\"IF3\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"VFV)-fU@dz!80mqlA[?z\">moisture</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">80</field></shadow></value></block></value><statement name=\"DO3\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Target</field><comment pinned=\"false\" h=\"80\" w=\"160\">Humide</comment"],[0,"></b"]],"start1":4999,"start2":4999,"length1":23,"length2":684},{"diffs":[[0,"e=\"i\">IconNames."],[-1,"No"],[1,"Umbrella"],[0,"</field></block>"]],"start1":5763,"start2":5763,"length1":34,"length2":40},{"diffs":[[0,"mbrella</field><"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Très humide</comment><"],[0,"/block></stateme"]],"start1":5780,"start2":5780,"length1":32,"length2":92},{"diffs":[[0,"g\"><"],[-1,"comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><"],[0,"valu"]],"start1":6662,"start2":6662,"length1":68,"length2":8},{"diffs":[[0,"id=\""],[-1,"#iF@C6:p{Ph9%%c5$uut"],[1,"Bdvg~03_iCtNRsH^X0A~"],[0,"\">PI"]],"start1":6847,"start2":6847,"length1":28,"length2":28},{"diffs":[[0,"dité"],[-1," sur P0"],[0,"</co"]],"start1":6977,"start2":6977,"length1":15,"length2":8},{"diffs":[[0,"id=\""],[-1,"WMmXsJ|ykdcfV_g$Qkd7"],[1,"7hEyFC?,IhXw1]CDD;yO"],[0,"\">PI"]],"start1":7205,"start2":7205,"length1":28,"length2":28},{"diffs":[[0,"on d'eau"],[-1," sur P1"],[0,"</commen"]],"start1":7309,"start2":7309,"length1":23,"length2":16},{"diffs":[[0,"/block></value><"],[1,"next><block type=\"variables_set\"><field name=\"VAR\" id=\"H%~Fy%_F:XntQ_EZ!@*F\">MOISTURE_AIR</field><comment pinned=\"false\" h=\"80\" w=\"160\">Constantes de calibration\nValeur dans l'air (sec)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">99</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"DZB4H@,B]i1I58OrEI_(\">MOISTURE_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Valeur dans l'eau</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">47</field></shadow></value><"],[0,"/block></next></"]],"start1":7476,"start2":7476,"length1":32,"length2":578},{"diffs":[[0,"/next></block></"],[1,"next></block></next></block></"],[0,"statement></bloc"]],"start1":8091,"start2":8091,"length1":32,"length2":62},{"diffs":[[0,"\"131"],[-1,"1"],[1,"8"],[0,"\" y=\"-4"],[-1,"9"],[1,"5"],[0,"\"><m"]],"start1":8191,"start2":8191,"length1":17,"length2":17},{"diffs":[[0,"id=\""],[-1,"Q(TQj1|^B]v+cVq!a^En"],[1,"%$v~q,;iCPcPu;V/,_AG"],[0,"\"><a"]],"start1":8247,"start2":8247,"length1":28,"length2":28},{"diffs":[[0,"ue\" id=\""],[-1,"zt3fyr08njcvkp3352fv"],[1,"q5ajjsn9b2cfe1sgqeks7"],[0,"\" type=\""]],"start1":8290,"start2":8290,"length1":36,"length2":37},{"diffs":[[0,"60\">"],[-1,"Signal digital détection d'eau sur P1"],[1,"Valeur dans l'eau"],[0,"\nFon"]],"start1":8438,"start2":8438,"length1":45,"length2":25},{"diffs":[[0,"me=\""],[-1,"zt3fyr08njcvkp3352fv"],[1,"q5ajjsn9b2cfe1sgqeks7"],[0,"\"><b"]],"start1":8517,"start2":8517,"length1":28,"length2":29},{"diffs":[[0,"pe=\""],[-1,"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation"],[1,"variables_set\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field"],[0,"><co"]],"start1":8712,"start2":8712,"length1":106,"length2":82},{"diffs":[[0,"age "],[-1,"(0-"],[1,"avec inversion de l'échelle\net limitation entre 0 et "],[0,"100%"],[-1,")"],[0,"</co"]],"start1":8852,"start2":8852,"length1":16,"length2":65},{"diffs":[[0,"me=\""],[-1,"RETURN_"],[0,"VALU"]],"start1":8932,"start2":8932,"length1":15,"length2":8},{"diffs":[[0,"w\"><"],[-1,"shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">1023</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value"],[1,"block type=\"variables_get\"><field name=\"VAR\" id=\"H%~Fy%_F:XntQ_EZ!@*F\">MOISTURE_AIR</field></block></value><value name=\"fromHigh\"><block type=\"variables_get\"><field name=\"VAR\" id=\"DZB4H@,B]i1I58OrEI_(\">MOISTURE_WATER</field></block></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Limiter les valeurs entre 0 et 100</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\"><field name=\"OP\">round</field><value name=\"ARG0\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"RlUOOwp-F1QVE1*k(TXc\">humidity</field></block></value></block></value></block></next></block></next></block></next"],[0,"></b"]],"start1":9159,"start2":9159,"length1":375,"length2":2410}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"// "],[-1,"Signal digital détection d'eau sur P0 et \n// S\n// Fonction de conversion pour l'humidité\n\n// Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"Démarrage du capteur EARTH\\n\")\nserial.writeString(\"Moisture,WaterDetected\\n\")\n\n// Constantes de calibration\nlet MOISTURE_AIR = 99    // Valeur dans l'air (sec)\nlet MOISTURE_WATER = 47  // Valeur dans l'eau\n\nfunction convertMoisture (rawValue: number) {\n    // Conversion en pourcentage (0-100%)\n    return Math.map(rawValue, 0, 1023, 0, 100)\n}\nlet moisture = 0\nlet waterDetected = 0\nlet moistureRaw"],[1,"Valeur dans l'eau\n// Fonction de conversion pour l'humidité\nfunction convertMoisture (rawValue: number) {\n    // Conversion en pourcentage avec inversion de l'échelle\n    // et limitation entre 0 et 100%\n    humidity = Math.map(rawValue, MOISTURE_AIR, MOISTURE_WATER, 0, 100)\n    // Limiter les valeurs entre 0 et 100\n    if (humidity < 0) {\n        humidity = 0\n    }\n    if (humidity > 100) {\n        humidity = 100\n    }\n    return Math.round(humidity)\n}\n/**\n * CAPTEUR EARTH\n * \n * D out => P0 (Digital [0,1])\n * \n * A out => P1 (Analogique [0..1023]\n */\nlet moisture = 0\nlet waterDetected = 0\nlet moistureRaw = 0\nlet humidity = 0\nlet MOISTURE_WATER = 0\nlet MOISTURE_AIR"],[0," = 0"]],"start1":0,"start2":0,"length1":603,"length2":681},{"diffs":[[0,"\"))\n"],[-1,"// En-tête CSV\n"],[0,"seri"]],"start1":824,"start2":824,"length1":23,"length2":8},{"diffs":[[0,"dité"],[-1," sur P0"],[0,"\nlet"]],"start1":933,"start2":933,"length1":15,"length2":8},{"diffs":[[0,"'eau"],[-1," sur P1"],[0,"\nlet"]],"start1":999,"start2":999,"length1":15,"length2":8},{"diffs":[[0,"lPin.P0\n"],[1,"// Constantes de calibration\n// Valeur dans l'air (sec)\nMOISTURE_AIR = 99\n// Valeur dans l'eau\nMOISTURE_WATER = 47\n"],[0,"// Boucl"]],"start1":1026,"start2":1026,"length1":16,"length2":131},{"diffs":[[0,"on l"],[-1,"a présence d'eau\n    if (waterDetected == 1) {"],[1,"e niveau d'humidité\n    // Très sec\n    if (moisture < 20) {\n        basic.showIcon(IconNames.No)\n    } else if (moisture < 40) {\n        // Un peu humide\n        basic.showIcon(IconNames.Triangle)\n    } else if (moisture < 60) {\n        // Moyennement humide\n        basic.showIcon(IconNames.Square)\n    } else if (moisture < 80) {\n        // Humide"],[0,"\n   "]],"start1":1656,"start2":1656,"length1":54,"length2":358},{"diffs":[[0,"mes."],[-1,"Umbrella"],[1,"Target"],[0,")\n  "]],"start1":2040,"start2":2040,"length1":16,"length2":14},{"diffs":[[0," else {\n"],[1,"        // Très humide\n"],[0,"        "]],"start1":2057,"start2":2057,"length1":16,"length2":39},{"diffs":[[0,"n(IconNames."],[-1,"No"],[1,"Umbrella"],[0,")\n    }\n    "]],"start1":2109,"start2":2109,"length1":26,"length2":32}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":244,"start2":244,"length1":17,"length2":21}]}]},{"timestamp":1737424953102,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"id=\""],[-1,"%^D}nV/*n5x)*A[qyRKr\">humidity</variable><variable id=\"nIR!gpubGu.G-H-}Sidw\">MOISTURE_AIR</variable><variable id=\"qdB/@zcjbQ.4`IrN[AvV\">MOISTURE_WATER</variable><variable id=\"^g!@`nO}1_M}7sw-+zj:"],[1,"6Df`+?*U#v%%-((*O,u6"],[0,"\">mo"]],"start1":76,"start2":76,"length1":203,"length2":28},{"diffs":[[0,"ble id=\""],[-1,"d30:vC=ck`q@n4Yrr!kY"],[1,"#iF@C6:p{Ph9%%c5$uut"],[0,"\">PIN_MO"]],"start1":130,"start2":130,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"CK#_R4ocgM`Q@lokuNNi\">waterDetected</variable><variable id=\"v6(j#cC6JnctZe}T2uzl\">PIN_WATER</variable><variable id=\",Ov4Eqj*Yc5VTqx.w@hi\">moisture</variable></variables><comment x=\"0\" y=\"793\" w=\"420\" h=\"120\">\nSignal digital détection d'eau sur P0\nSignal analogique humidité de l'eau sur P1\nFonction de conversion pour l'humidité\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let moisture = 0\" numlines=\"1\" declaredvars=\"moisture\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let waterDetected = 0\" numlines=\"1\" declaredvars=\"waterDetected\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let moistureRaw = 0\" numlines=\"1\" declaredvars=\"moistureRaw\"></mutation><next><block type=\"serial_setbaudrate\"><field name=\"rate\">BaudRate.BaudRate115200</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de la communication série</comment><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"Démarrage du capteur EARTH\\n\")</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"Moisture,WaterDetected\\n\")</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"nIR!gpubGu.G-H-}Sidw\">MOISTURE_AIR</field><comment pinned=\"false\" h=\"80\" w=\"160\">Constantes de calibration\nValeur dans l'air (sec)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">99</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qdB/@zcjbQ.4`IrN[AvV\">MOISTURE_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Valeur dans l'eau</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">47</field></shadow></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"Démarrage du capteur EARTH\\n\")</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"DonnéesBrutes,TauxHumidité,DetectionEau\\n\")</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"d30:vC=ck`q@n4Yrr!kY\">PIN_MOISTURE</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définition des broches\nSignal analogique humidité sur P1</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"analog_pin\"><field name=\"pin\">AnalogPin.P1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"v6(j#cC6JnctZe}T2uzl\">PIN_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P0</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block"],[1,"{2vxWMAgS0uhwBuYYy5~\">waterDetected</variable><variable id=\"WMmXsJ|ykdcfV_g$Qkd7\">PIN_WATER</variable><variable id=\"#[`vd@+PqdJe{NDn-qP^\">moisture</variable></variables"],[0,"><bl"]],"start1":193,"start2":193,"length1":3524,"length2":176},{"diffs":[[0," x=\""],[-1,"610"],[1,"545"],[0,"\" y=\""],[-1,"0"],[1,"-49"],[0,"\"><c"]],"start1":394,"start2":394,"length1":17,"length2":19},{"diffs":[[0,"AR\" id=\""],[-1,"^g!@`nO}1_M}7sw-+zj:"],[1,"6Df`+?*U#v%%-((*O,u6"],[0,"\">moistu"]],"start1":545,"start2":545,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"d30:vC=ck`q@n4Yrr!kY"],[1,"#iF@C6:p{Ph9%%c5$uut"],[0,"\">PI"]],"start1":946,"start2":946,"length1":28,"length2":28},{"diffs":[[0,"AR\" id=\""],[-1,"CK#_R4ocgM`Q@lokuNNi"],[1,"{2vxWMAgS0uhwBuYYy5~"],[0,"\">waterD"]],"start1":1072,"start2":1072,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"v6(j#cC6JnctZe}T2uzl"],[1,"WMmXsJ|ykdcfV_g$Qkd7"],[0,"\">PI"]],"start1":1390,"start2":1390,"length1":28,"length2":28},{"diffs":[[0,"id=\""],[-1,",Ov4Eqj*Yc5VTqx.w@hi"],[1,"#[`vd@+PqdJe{NDn-qP^"],[0,"\">mo"]],"start1":1517,"start2":1517,"length1":28,"length2":28},{"diffs":[[0,"tionid=\""],[-1,"OuuM@QH)KnP@3;x2B-mb"],[1,"Q(TQj1|^B]v+cVq!a^En"],[0,"\"><arg n"]],"start1":1787,"start2":1787,"length1":36,"length2":36},{"diffs":[[0,"ue\" id=\""],[-1,"ynsrook4rup9foq0wqkz"],[1,"zt3fyr08njcvkp3352fv"],[0,"\" type=\""]],"start1":1834,"start2":1834,"length1":36,"length2":36},{"diffs":[[0,"e name=\""],[-1,"ynsrook4rup9foq0wqkz"],[1,"zt3fyr08njcvkp3352fv"],[0,"\"><shado"]],"start1":1900,"start2":1900,"length1":36,"length2":36},{"diffs":[[0,"id=\""],[-1,"^g!@`nO}1_M}7sw-+zj:"],[1,"6Df`+?*U#v%%-((*O,u6"],[0,"\">mo"]],"start1":2039,"start2":2039,"length1":28,"length2":28},{"diffs":[[0,"t\"><"],[-1,"shadow type=\"text\"><field name=\"TEXT\"></field></shadow><"],[0,"bloc"]],"start1":2255,"start2":2255,"length1":64,"length2":8},{"diffs":[[0,"ON\">"],[-1,"("],[0,"moisture"],[-1,"Raw"],[0,".toS"]],"start1":2315,"start2":2315,"length1":20,"length2":16},{"diffs":[[0,"sture.toString()"],[-1,")"],[0,"</field></block>"]],"start1":2322,"start2":2322,"length1":33,"length2":32},{"diffs":[[0,"t\"><"],[-1,"shadow type=\"text\"><field name=\"TEXT\"></field></shadow><"],[0,"bloc"]],"start1":2540,"start2":2540,"length1":64,"length2":8},{"diffs":[[0,"ON\">"],[-1,"(moisture.toString())</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">("],[0,"wate"]],"start1":2600,"start2":2600,"length1":352,"length2":8},{"diffs":[[0,"String()"],[-1,")"],[0,"</field>"]],"start1":2620,"start2":2620,"length1":17,"length2":16},{"diffs":[[0,"t\"><"],[-1,"shadow type=\"text\"><field name=\"TEXT\"></field></shadow><"],[0,"bloc"]],"start1":2707,"start2":2707,"length1":64,"length2":8},{"diffs":[[0,"ON\">"],[-1,"("],[0,"\"\\n\""],[-1,")"],[0,"</fi"]],"start1":2767,"start2":2767,"length1":14,"length2":12},{"diffs":[[0,"id=\""],[-1,"CK#_R4ocgM`Q@lokuNNi"],[1,"{2vxWMAgS0uhwBuYYy5~"],[0,"\">wa"]],"start1":3229,"start2":3229,"length1":28,"length2":28},{"diffs":[[0," de "],[-1,"1"],[1,"2"],[0," seconde"],[1,"s"],[0,"</co"]],"start1":3695,"start2":3695,"length1":17,"length2":18},{"diffs":[[0,"me=\"ms\">"],[-1,"1"],[1,"2"],[0,"000</fie"]],"start1":3774,"start2":3774,"length1":17,"length2":17},{"diffs":[[0,"k></"],[-1,"next></block></next></block></"],[0,"stat"]],"start1":3937,"start2":3937,"length1":38,"length2":8},{"diffs":[[0,"pe=\""],[-1,"function_definition"],[1,"pxt-on-start"],[0,"\" x=\""],[-1,"1377"],[1,"0"],[0,"\" y="]],"start1":3968,"start2":3968,"length1":36,"length2":26},{"diffs":[[0,"0\"><"],[-1,"mutation name=\"convertMoisture\" functionid=\"OuuM@QH)KnP@3;x2B-mb\"><arg name=\"rawValue\" id=\"ynsrook4rup9foq0wqkz\" type=\"number\"></arg></mutation><field name=\"function_name\">convertMoisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Valeur dans l'eau\nFonction de conversion pour l'humidité</comment><data>0</data><value name=\"ynsrook4rup9foq0wqkz\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutat"],[1,"statement name=\"HANDLER\"><block type=\"serial_setbaudrate\"><field name=\"rate\">BaudRate.BaudRate115200</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de la communication série</comment><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_express"],[0,"ion"],[1,"\""],[0,"><fi"]],"start1":3995,"start2":3995,"length1":439,"length2":298},{"diffs":[[0,"field name=\""],[-1,"VALUE\">rawValue"],[1,"EXPRESSION\">\"Démarrage du capteur EARTH\\n\""],[0,"</field></bl"]],"start1":4291,"start2":4291,"length1":39,"length2":66},{"diffs":[[0,"ue><"],[-1,"statement name=\"STACK\""],[1,"next"],[0,"><bl"]],"start1":4366,"start2":4366,"length1":30,"length2":12},{"diffs":[[0,"pe=\""],[-1,"variables_set\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion en pourcentage avec inversion de l'échelle\net limitation entre 0 et 100%</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">rawValue"],[1,"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"Moisture,WaterDetected\\n\""],[0,"</fi"]],"start1":4384,"start2":4384,"length1":408,"length2":194},{"diffs":[[0,"ue><"],[-1,"value name=\"fromLow\""],[1,"next"],[0,"><bl"]],"start1":4595,"start2":4595,"length1":28,"length2":12},{"diffs":[[0,"type=\"variables_"],[-1,"g"],[1,"s"],[0,"et\"><field name="]],"start1":4611,"start2":4611,"length1":33,"length2":33},{"diffs":[[0,"id=\""],[-1,"nIR!gpubGu.G-H-}Sidw\">"],[1,"#iF@C6:p{Ph9%%c5$uut\">PIN_"],[0,"MOISTURE"],[-1,"_AIR"],[0,"</fi"]],"start1":4650,"start2":4650,"length1":42,"length2":42},{"diffs":[[0,"ld><"],[-1,"/block></value><value name=\"fromHigh\"><block type=\"variables_get\"><field name=\"VAR\" id=\"qdB/@zcjbQ.4`IrN[AvV\">MOISTURE_WATER</field></block></value"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">Définition des broches\nSignal analogique humidité sur P0</comment"],[0,"><va"]],"start1":4693,"start2":4693,"length1":155,"length2":111},{"diffs":[[0,"me=\""],[-1,"toLow"],[1,"VALUE"],[0,"\"><s"]],"start1":4810,"start2":4810,"length1":13,"length2":13},{"diffs":[[0,"ow><"],[-1,"/value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><next><block type=\"controls_if\""],[1,"block type=\"analog_pin\"><field name=\"pin\">AnalogPin.P1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"WMmXsJ|ykdcfV_g$Qkd7\">PIN_WATER</field"],[0,"><co"]],"start1":4881,"start2":4881,"length1":156,"length2":180},{"diffs":[[0,"60\">"],[-1,"Limiter les valeurs entre 0 et 100"],[1,"Signal digital détection d'eau sur P1"],[0,"</co"]],"start1":5093,"start2":5093,"length1":42,"length2":45},{"diffs":[[0,"nt><value name=\""],[-1,"IF0"],[1,"VALUE"],[0,"\"><shadow type=\""]],"start1":5141,"start2":5141,"length1":35,"length2":37},{"diffs":[[0,"hadow type=\""],[-1,"logic_boolean"],[1,"math_number"],[0,"\"><field nam"]],"start1":5166,"start2":5166,"length1":37,"length2":35},{"diffs":[[0,"field name=\""],[-1,"BOOL\">TRUE"],[1,"NUM\">0"],[0,"</field></sh"]],"start1":5192,"start2":5192,"length1":34,"length2":30},{"diffs":[[0,"block type=\""],[-1,"logic_compare"],[1,"digital_pin"],[0,"\"><field nam"]],"start1":5228,"start2":5228,"length1":37,"length2":35},{"diffs":[[0,"me=\""],[-1,"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field></block></value><value name=\"B\"><shadow"],[1,"pin\">DigitalPin.P0</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1311\" y=\"-49\"><mutation name=\"convertMoisture\" functionid=\"Q(TQj1|^B]v+cVq!a^En\"><arg name=\"rawValue\" id=\"zt3fyr08njcvkp3352fv\""],[0," type=\""],[-1,"math_"],[0,"numb"]],"start1":5262,"start2":5262,"length1":240,"length2":309},{"diffs":[[0,"r\"><"],[-1,"field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">"],[1,"/arg></mutation><field name=\"function_name\">convertMoisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P1\nFonction de conversion pour l'"],[0,"humidit"],[-1,"y</field"],[1,"é</comment"],[0,"><va"]],"start1":5572,"start2":5572,"length1":176,"length2":199},{"diffs":[[0,"me=\""],[-1,"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0"],[1,"zt3fyr08njcvkp3352fv\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">rawValue"],[0,"</fi"]],"start1":5777,"start2":5777,"length1":61,"length2":141},{"diffs":[[0,"wValue</field></"],[-1,"shadow"],[1,"block"],[0,"></value></block"]],"start1":5908,"start2":5908,"length1":38,"length2":37},{"diffs":[[0,"ue><"],[-1,"/block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field"],[1,"statement name=\"STACK\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion en pourcentage (0-100%)</comment"],[0,"><va"]],"start1":5935,"start2":5935,"length1":200,"length2":225},{"diffs":[[0,"nt><value name=\""],[-1,"A"],[1,"RETURN_VALUE"],[0,"\"><shadow type=\""]],"start1":6154,"start2":6154,"length1":33,"length2":44},{"diffs":[[0,"pe=\""],[-1,"variables_get\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity"],[1,"math_map\"><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">rawValue"],[0,"</fi"]],"start1":6256,"start2":6256,"length1":75,"length2":105},{"diffs":[[0,"ue><value name=\""],[-1,"B"],[1,"fromLow"],[0,"\"><shadow type=\""]],"start1":6378,"start2":6378,"length1":33,"length2":39},{"diffs":[[0,"ield name=\"NUM\">"],[-1,"10"],[0,"0</field></shado"]],"start1":6432,"start2":6432,"length1":34,"length2":32},{"diffs":[[0,"ue><"],[-1,"/block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field"],[1,"value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">1023</field></shadow></value"],[0,"><va"]],"start1":6471,"start2":6471,"length1":132,"length2":103},{"diffs":[[0,"ue><value name=\""],[-1,"VALUE"],[1,"toLow"],[0,"\"><shadow type=\""]],"start1":6568,"start2":6568,"length1":37,"length2":37},{"diffs":[[0,"e=\"NUM\">"],[-1,"10"],[0,"0</field"]],"start1":6628,"start2":6628,"length1":18,"length2":16},{"diffs":[[0,"ue><"],[-1,"/block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">return Math.round(humidity)</comment><value name=\"RETURN_VALUE"],[1,"value name=\"toHigh"],[0,"\"><s"]],"start1":6659,"start2":6659,"length1":246,"length2":26},{"diffs":[[0,"ield name=\"NUM\">"],[1,"10"],[0,"0</field></shado"]],"start1":6712,"start2":6712,"length1":32,"length2":34},{"diffs":[[0,"ow><"],[-1,"block type=\"variables_get\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field></block></value></block></next></block></next></block></next"],[1,"/value></block></value"],[0,"></b"]],"start1":6745,"start2":6745,"length1":155,"length2":30}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"/"],[-1,"**\n *"],[1,"/"],[0," Sig"]],"start1":0,"start2":0,"length1":10,"length2":6},{"diffs":[[0,"r P0"],[-1,"\n * \n * Signal analogique humidité de l'eau sur P1\n * \n *"],[1," et \n// S\n//"],[0," Fon"]],"start1":36,"start2":36,"length1":65,"length2":20},{"diffs":[[0,"ité\n"],[-1," */"],[0,"\n// "],[-1,"Valeur dans l'eau\n// Fonction de conversion pour l'humidité\nfunction convertMoisture (rawValue: number) {\n    // Conversion en pourcentage avec inversion de l'échelle\n    // et limitation entre 0 et 100%\n    humidity = Math.map(rawValue, MOISTURE_AIR, MOISTURE_WATER, 0, 100)\n    // Limiter les valeurs entre 0 et 100\n    if (humidity < 0"],[1,"Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"Démarrage du capteur EARTH\\n\")\nserial.writeString(\"Moisture,WaterDetected\\n\")\n\n// Constantes de calibration\nlet MOISTURE_AIR = 99    // Valeur dans l'air (sec)\nlet MOISTURE_WATER = 47  // Valeur dans l'eau\n\nfunction convertMoisture (rawValue: number"],[0,") {\n    "],[-1,"  "],[-1,"  humidity = 0\n    }\n    if (humidity > 100) {\n        humidity = 100\n    }"],[1,"// Conversion en pourcentage (0-100%)"],[0,"\n   "],[-1," //"],[0," ret"]],"start1":88,"start2":88,"length1":445,"length2":415},{"diffs":[[0,"ath."],[-1,"round(humidity)\n    return humidity\n}\nlet humidity = 0\nlet MOISTURE_WATER = 0\nlet MOISTURE_AIR = 0"],[1,"map(rawValue, 0, 1023, 0, 100)\n}"],[0,"\nlet"]],"start1":508,"start2":508,"length1":106,"length2":40},{"diffs":[[0,"teur EARTH\\n\"))\n"],[1,"// En-tête CSV\n"],[0,"serial.writeStri"]],"start1":734,"start2":734,"length1":32,"length2":47},{"diffs":[[0,"cted"],[-1,"\\n\"))\n// Constantes de calibration\n// Valeur dans l'air (sec)\nMOISTURE_AIR = 99\n// Valeur dans l'eau\nMOISTURE_WATER = 47\n// En-tête CSV\nserial.writeString(\"\" + (\"Démarrage du capteur EARTH\\n\"))\nserial.writeString(\"\" + (\"DonnéesBrutes,TauxHumidité,DetectionEau"],[0,"\\n\")"]],"start1":809,"start2":809,"length1":267,"length2":8},{"diffs":[[0,"té sur P"],[-1,"1"],[1,"0"],[0,"\nlet PIN"]],"start1":872,"start2":872,"length1":17,"length2":17},{"diffs":[[0," d'eau sur P"],[-1,"0"],[1,"1"],[0,"\nlet PIN_WAT"]],"start1":941,"start2":941,"length1":25,"length2":25},{"diffs":[[0,"rie\n"],[-1,"    serial.writeString(\"\" + (moistureRaw.toString()))\n    serial.writeString(\",\")\n"],[0,"    "]],"start1":1278,"start2":1278,"length1":90,"length2":8},{"diffs":[[0," de "],[-1,"1"],[1,"2"],[0," seconde"],[1,"s"],[0,"\n   "]],"start1":1654,"start2":1654,"length1":17,"length2":18},{"diffs":[[0,"c.pause("],[-1,"1"],[1,"2"],[0,"000)\n})\n"]],"start1":1677,"start2":1677,"length1":17,"length2":17}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":244,"start2":244,"length1":21,"length2":17}]}]},{"timestamp":1737425501695,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ble id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">humidi"]],"start1":72,"start2":72,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"K^0ve?-sB1$qt{qT92!R"],[1,"nIR!gpubGu.G-H-}Sidw"],[0,"\">MOISTU"]],"start1":127,"start2":127,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"u)n!I_XwsBX2qB`p8;J3"],[1,"qdB/@zcjbQ.4`IrN[AvV"],[0,"\">MOISTU"]],"start1":186,"start2":186,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"}W+A_K{%9(jmId0pUnlK"],[1,"^g!@`nO}1_M}7sw-+zj:"],[0,"\">moistu"]],"start1":247,"start2":247,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"pp0x9[q,B,yfv#}Z?f`L"],[1,"d30:vC=ck`q@n4Yrr!kY"],[0,"\">PIN_MO"]],"start1":305,"start2":305,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"hL|dk#LI@@(H{C#bkh}2"],[1,"CK#_R4ocgM`Q@lokuNNi"],[0,"\">waterD"]],"start1":364,"start2":364,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"y4(=oiehLY?@g3}UG@YZ"],[1,"v6(j#cC6JnctZe}T2uzl"],[0,"\">PIN_WA"]],"start1":424,"start2":424,"length1":36,"length2":36},{"diffs":[[0,"ble id=\""],[-1,"Jb:yeoGPtUY1iA5mv7r@"],[1,",Ov4Eqj*Yc5VTqx.w@hi"],[0,"\">moistu"]],"start1":480,"start2":480,"length1":36,"length2":36},{"diffs":[[0,"ment"],[-1," id=\"Lvi%A1BVOe71O$L4hoyE\""],[0," x=\""],[-1,"22"],[1,"0"],[0,"\" y=\""],[-1,"-200"],[1,"793"],[0,"\" w="]],"start1":545,"start2":545,"length1":49,"length2":21},{"diffs":[[0,"420\" h=\""],[1,"1"],[0,"2"],[-1,"0"],[0,"0\">\nSign"]],"start1":567,"start2":567,"length1":18,"length2":18},{"diffs":[[0," sur P1\n"],[-1,"\n"],[0,"Fonction"]],"start1":654,"start2":654,"length1":17,"length2":16},{"diffs":[[0,"art\""],[-1," id=\"VFTKx:2oMqYVaP60BSh/\""],[0," x=\""],[-1,"2"],[0,"0\" y=\""],[-1,"2"],[0,"0\"><"]],"start1":733,"start2":733,"length1":46,"length2":18},{"diffs":[[0,"ent\""],[-1," id=\"@tmvjCN1@)nm%!o4ALO|\""],[0,"><mu"]],"start1":806,"start2":806,"length1":34,"length2":8},{"diffs":[[0,"moisture"],[-1,"Raw"],[0," = 0\" nu"]],"start1":869,"start2":869,"length1":19,"length2":16},{"diffs":[[0,"moisture"],[-1,"Raw"],[0,"\"></muta"]],"start1":910,"start2":910,"length1":19,"length2":16},{"diffs":[[0,"ent\""],[-1," id=\"pwevUC%}gb3+jN:TWU-T\""],[0,"><mu"]],"start1":967,"start2":967,"length1":34,"length2":8},{"diffs":[[0,"ent\""],[-1," id=\"s^EKE0!$E_eBj];d~(9.\""],[0,"><mu"]],"start1":1138,"start2":1138,"length1":34,"length2":8},{"diffs":[[0,"e0=\"let moisture"],[1,"Raw"],[0," = 0\" numlines=\""]],"start1":1193,"start2":1193,"length1":32,"length2":35},{"diffs":[[0,"edvars=\"moisture"],[1,"Raw"],[0,"\"></mutation><ne"]],"start1":1237,"start2":1237,"length1":32,"length2":35},{"diffs":[[0,"ate\""],[-1," id=\"rw@th]]1:nu*GK.z[Z8+\""],[0,"><fi"]],"start1":1303,"start2":1303,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"b=W:MRc8ic*p5@k;ijx3\""],[0,"><va"]],"start1":1481,"start2":1481,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"W~qeS`1RhRXr!Gxvyv7=\""],[0,"><fi"]],"start1":1520,"start2":1520,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"82x^n^QAeEYcvus[e=l6\""],[0,"><fi"]],"start1":1592,"start2":1592,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"cgT2/:kVz.qN~EewrBN5\""],[0,"><va"]],"start1":1712,"start2":1712,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"f)(tLBTr4j9U1JutXy4V\""],[0,"><fi"]],"start1":1751,"start2":1751,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"JI{hmX*AD1lG2YB8.?Q+\""],[0,"><fi"]],"start1":1823,"start2":1823,"length1":34,"length2":8},{"diffs":[[0,"set\""],[-1," id=\"yVe4bJ!nM@]D.:$5|%O#\""],[0,"><fi"]],"start1":1934,"start2":1934,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"K^0ve?-sB1$qt{qT92!R"],[1,"nIR!gpubGu.G-H-}Sidw"],[0,"\">MOISTU"]],"start1":1953,"start2":1953,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"}hx4%KW1#B6=?,dAsh/-\""],[0,"><fi"]],"start1":2143,"start2":2143,"length1":34,"length2":8},{"diffs":[[0,"UM\">"],[-1,"1017"],[1,"99"],[0,"</fi"]],"start1":2162,"start2":2162,"length1":12,"length2":10},{"diffs":[[0,"set\""],[-1," id=\"H`jvfuBVnhcuqENeaI_%\""],[0,"><fi"]],"start1":2222,"start2":2222,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"u)n!I_XwsBX2qB`p8;J3"],[1,"qdB/@zcjbQ.4`IrN[AvV"],[0,"\">MOISTU"]],"start1":2241,"start2":2241,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"-eU9O)A)5]s-?qIz.p{M\""],[0,"><fi"]],"start1":2401,"start2":2401,"length1":34,"length2":8},{"diffs":[[0,"=\"NUM\">4"],[-1,"50"],[1,"7"],[0,"</field>"]],"start1":2417,"start2":2417,"length1":18,"length2":17},{"diffs":[[0,"ing\""],[-1," id=\"M_bE9qwK#:YM@5eG7E+K\""],[0,"><co"]],"start1":2485,"start2":2485,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"CA49h7LR9w7oGu+.]:G.\""],[0,"><fi"]],"start1":2584,"start2":2584,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"cU%)aq]s%Eo1J)7p$x:A\""],[0,"><fi"]],"start1":2656,"start2":2656,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"8#|Y95?V~WJ~Gz(YX~w?\""],[0,"><va"]],"start1":2776,"start2":2776,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"ncQ1t}*NXCW(,Qo(M{jq\""],[0,"><fi"]],"start1":2815,"start2":2815,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"RSDK5[lzMjsd83G~Mk_9\""],[0,"><fi"]],"start1":2887,"start2":2887,"length1":34,"length2":8},{"diffs":[[0,"set\""],[-1," id=\"rwCk;31tsZ.Ggh,)V#r9\""],[0,"><fi"]],"start1":3015,"start2":3015,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"pp0x9[q,B,yfv#}Z?f`L"],[1,"d30:vC=ck`q@n4Yrr!kY"],[0,"\">PIN_MO"]],"start1":3034,"start2":3034,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"/,HKa(@$PH.6`uy{BkQS\""],[0,"><fi"]],"start1":3231,"start2":3231,"length1":34,"length2":8},{"diffs":[[0,"pin\""],[-1," id=\"{Cz7=Ja6,;]}DKz,XCow\""],[0,"><fi"]],"start1":3292,"start2":3292,"length1":34,"length2":8},{"diffs":[[0,"set\""],[-1," id=\"F.!nz[2vN8WwPxN[Ic^g\""],[0,"><fi"]],"start1":3380,"start2":3380,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"y4(=oiehLY?@g3}UG@YZ"],[1,"v6(j#cC6JnctZe}T2uzl"],[0,"\">PIN_WA"]],"start1":3399,"start2":3399,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"5YkPh4I:#Q|djwI2_3XK\""],[0,"><fi"]],"start1":3574,"start2":3574,"length1":34,"length2":8},{"diffs":[[0,"pin\""],[-1," id=\"w?fwX@2C~YUtBX]6J[;w\""],[0,"><fi"]],"start1":3636,"start2":3636,"length1":34,"length2":8},{"diffs":[[0,"ver\""],[-1," id=\"zYq:z5q@Q}c^PL|f%I~J\""],[0," x=\""],[-1,"73"],[1,"61"],[0,"0\" y=\""],[-1,"2"],[0,"0\"><"]],"start1":3913,"start2":3913,"length1":47,"length2":20},{"diffs":[[0,"set\""],[-1," id=\"SBPa9S9OZ!*(HQM_L^FL\""],[0,"><fi"]],"start1":4047,"start2":4047,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"}W+A_K{%9(jmId0pUnlK"],[1,"^g!@`nO}1_M}7sw-+zj:"],[0,"\">moistu"]],"start1":4066,"start2":4066,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"zQQJ2ZPnwK!{ge=.m3q?\""],[0,"><fi"]],"start1":4225,"start2":4225,"length1":34,"length2":8},{"diffs":[[0,"pin\""],[-1," id=\"c_zTngB=u}r;pp;?6aQa\""],[0,"><va"]],"start1":4297,"start2":4297,"length1":34,"length2":8},{"diffs":[[0,"dow\""],[-1," id=\"2X|zVg2FVLr;@a-!ozbq\""],[0,"><fi"]],"start1":4360,"start2":4360,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"m1%)~!+t67D.vyD@/y4-\""],[0,"><fi"]],"start1":4444,"start2":4444,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"pp0x9[q,B,yfv#}Z?f`L"],[1,"d30:vC=ck`q@n4Yrr!kY"],[0,"\">PI"]],"start1":4467,"start2":4467,"length1":28,"length2":28},{"diffs":[[0,"set\""],[-1," id=\"6Rej`MduI,yMYWYuajm~\""],[0,"><fi"]],"start1":4574,"start2":4574,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"hL|dk#LI@@(H{C#bkh}2"],[1,"CK#_R4ocgM`Q@lokuNNi"],[0,"\">waterD"]],"start1":4593,"start2":4593,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"A/{|PyS9LY-=^ptgzxWa\""],[0,"><fi"]],"start1":4686,"start2":4686,"length1":34,"length2":8},{"diffs":[[0,"pin\""],[-1," id=\"vW[/gAnc,8y#*Pb~rC_{\""],[0,"><va"]],"start1":4759,"start2":4759,"length1":34,"length2":8},{"diffs":[[0,"dow\""],[-1," id=\")L)rZ]xiT.n]9:bVKf`c\""],[0,"><fi"]],"start1":4812,"start2":4812,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"IVm!i_{byAs.M+A0MP(F\""],[0,"><fi"]],"start1":4888,"start2":4888,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"y4(=oiehLY?@g3}UG@YZ"],[1,"v6(j#cC6JnctZe}T2uzl"],[0,"\">PI"]],"start1":4911,"start2":4911,"length1":28,"length2":28},{"diffs":[[0,"set\""],[-1," id=\"zU)[55d+3*4h.=~x}HIN\""],[0,"><fi"]],"start1":5015,"start2":5015,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"Jb:yeoGPtUY1iA5mv7r@"],[1,",Ov4Eqj*Yc5VTqx.w@hi"],[0,"\">mo"]],"start1":5038,"start2":5038,"length1":28,"length2":28},{"diffs":[[0,"ber\""],[-1," id=\")nZA4~3Tei?NU)ob6M8z\""],[0,"><fi"]],"start1":5195,"start2":5195,"length1":34,"length2":8},{"diffs":[[0,"put\""],[-1," id=\"9b`Ny2]8.HNafH}K,eJ[\""],[0,"><mu"]],"start1":5266,"start2":5266,"length1":34,"length2":8},{"diffs":[[0,"tionid=\""],[-1,"ZO99t}i@8Jj=e;ZS|5G9"],[1,"OuuM@QH)KnP@3;x2B-mb"],[0,"\"><arg n"]],"start1":5308,"start2":5308,"length1":36,"length2":36},{"diffs":[[0,"ue\" id=\""],[-1,"4a3hqwjvneg018y8ynq4lh"],[1,"ynsrook4rup9foq0wqkz"],[0,"\" type=\""]],"start1":5355,"start2":5355,"length1":38,"length2":36},{"diffs":[[0,"e name=\""],[-1,"4a3hqwjvneg018y8ynq4lh"],[1,"ynsrook4rup9foq0wqkz"],[0,"\"><shado"]],"start1":5421,"start2":5421,"length1":38,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"q/;[}koe?/hN^m(p}gT=\""],[0,"><fi"]],"start1":5473,"start2":5473,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"^~*DTOnR-(0JS0#`.BX^\""],[0,"><fi"]],"start1":5537,"start2":5537,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"}W+A_K{%9(jmId0pUnlK"],[1,"^g!@`nO}1_M}7sw-+zj:"],[0,"\">mo"]],"start1":5560,"start2":5560,"length1":28,"length2":28},{"diffs":[[0,"ing\""],[-1," id=\"wCL{p]bYL|3$kB^b|A[:\""],[0,"><co"]],"start1":5671,"start2":5671,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"dER-iX8`^{zVe,WZav]`\""],[0,"><fi"]],"start1":5794,"start2":5794,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"I9?j.Y425F|[(/Nk;xm8\""],[0,"><fi"]],"start1":5866,"start2":5866,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"Ly2KzLD$I%X`uZ50*Rkd\""],[0,"><va"]],"start1":5978,"start2":5978,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"R*p2*,+dV^3[?yh,qmxV\""],[0,"><fi"]],"start1":6017,"start2":6017,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"iiDPIseEv$bsbb*IU5*]\""],[0,"><va"]],"start1":6101,"start2":6101,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"VN|fsf5ctQsD.BJ!qdsf\""],[0,"><fi"]],"start1":6140,"start2":6140,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"ZyAaNg}B!o$ykjk``5`U\""],[0,"><fi"]],"start1":6212,"start2":6212,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"MaHbEj1.C3-D_O/6!e`V\""],[0,"><va"]],"start1":6321,"start2":6321,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"uLN[|Zmrw`W_,jx,UdBL\""],[0,"><fi"]],"start1":6360,"start2":6360,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"`nd4t/V6KmeQ:%c}8TeS\""],[0,"><va"]],"start1":6444,"start2":6444,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"A?:kQ_UY}4zwJ!Y^amsU\""],[0,"><fi"]],"start1":6483,"start2":6483,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"N5c~8Yvp:V5oi?76kw/0\""],[0,"><fi"]],"start1":6555,"start2":6555,"length1":34,"length2":8},{"diffs":[[0,"ing\""],[-1," id=\"nTAfS~f5sl5$wk$NMwHt\""],[0,"><va"]],"start1":6669,"start2":6669,"length1":34,"length2":8},{"diffs":[[0,"ext\""],[-1," id=\"^NulbK2%VF`?/nsx5m(F\""],[0,"><fi"]],"start1":6708,"start2":6708,"length1":34,"length2":8},{"diffs":[[0,"ion\""],[-1," id=\"{oX7mV1v3yp#%d$_J|g!\""],[0,"><fi"]],"start1":6780,"start2":6780,"length1":34,"length2":8},{"diffs":[[0,"_if\""],[-1," id=\"y,Pek2,s0r|hdnj2x5P)\""],[0,"><mu"]],"start1":6867,"start2":6867,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"WZk)/#Q(T=B4,j!`K}Sp\""],[0,"><fi"]],"start1":7045,"start2":7045,"length1":34,"length2":8},{"diffs":[[0,"are\""],[-1," id=\"sY4e!08-Ij+x?=V9GXqB\""],[0,"><fi"]],"start1":7113,"start2":7113,"length1":34,"length2":8},{"diffs":[[0,"ber\""],[-1," id=\"Z`lx2Qwg}zS]4IB/p7]E\""],[0,"><fi"]],"start1":7183,"start2":7183,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"pC]zQOhu$WM1$p]_6k27\""],[0,"><fi"]],"start1":7247,"start2":7247,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"hL|dk#LI@@(H{C#bkh}2"],[1,"CK#_R4ocgM`Q@lokuNNi"],[0,"\">wa"]],"start1":7270,"start2":7270,"length1":28,"length2":28},{"diffs":[[0,"ber\""],[-1," id=\"EKk`f2MLnWlhZGE:F:W-\""],[0,"><fi"]],"start1":7371,"start2":7371,"length1":34,"length2":8},{"diffs":[[0,"con\""],[-1," id=\"F=/LJRq7jOn6}{sUybTZ\""],[0,"><fi"]],"start1":7483,"start2":7483,"length1":34,"length2":8},{"diffs":[[0,"con\""],[-1," id=\"}G=EeDRb!^nK1;4IK46i\""],[0,"><fi"]],"start1":7598,"start2":7598,"length1":34,"length2":8},{"diffs":[[0,"use\""],[-1," id=\"@`FCZ:1=(F;un#3dKPLR\""],[0,"><co"]],"start1":7687,"start2":7687,"length1":34,"length2":8},{"diffs":[[0,"ker\""],[-1," id=\"_^)qE$qF(T[(5`+[8u~s\""],[0,"><fi"]],"start1":7800,"start2":7800,"length1":34,"length2":8},{"diffs":[[0,"me=\"ms\">"],[-1,"5"],[1,"10"],[0,"00</fiel"]],"start1":7814,"start2":7814,"length1":17,"length2":18},{"diffs":[[0,"ion\""],[-1," id=\"}VpV@}vT!G(l6{TEOD[k\""],[0," x=\"1"],[-1,"496"],[1,"377"],[0,"\" y=\""],[-1,"2"],[0,"0\"><"]],"start1":8058,"start2":8058,"length1":48,"length2":21},{"diffs":[[0,"id=\""],[-1,"ZO99t}i@8Jj=e;ZS|5G9"],[1,"OuuM@QH)KnP@3;x2B-mb"],[0,"\"><a"]],"start1":8119,"start2":8119,"length1":28,"length2":28},{"diffs":[[0,"ue\" id=\""],[-1,"4a3hqwjvneg018y8ynq4lh"],[1,"ynsrook4rup9foq0wqkz"],[0,"\" type=\""]],"start1":8162,"start2":8162,"length1":38,"length2":36},{"diffs":[[0,"dité"],[-1,"\nreturn humidity"],[0,"</co"]],"start1":8365,"start2":8365,"length1":24,"length2":8},{"diffs":[[0,"me=\""],[-1,"4a3hqwjvneg018y8ynq4lh"],[1,"ynsrook4rup9foq0wqkz"],[0,"\"><b"]],"start1":8402,"start2":8402,"length1":30,"length2":28},{"diffs":[[0,"ber\""],[-1," id=\"rq(){N|IGhT;0/`FvH_r\""],[0,"><mu"]],"start1":8462,"start2":8462,"length1":34,"length2":8},{"diffs":[[0,"set\""],[-1," id=\"ndt]{P:UeU|Xin|}yiU#\""],[0,"><fi"]],"start1":8610,"start2":8610,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">humidi"]],"start1":8629,"start2":8629,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"[79s-g1XChs/0w#:_9MN\""],[0,"><fi"]],"start1":8849,"start2":8849,"length1":34,"length2":8},{"diffs":[[0,"map\""],[-1," id=\"rb.)?QCpa?VK,,?|{?U|\""],[0,"><va"]],"start1":8908,"start2":8908,"length1":34,"length2":8},{"diffs":[[0,"ber\""],[-1," id=\"T)I+V:xf?~;}XRcCOyLw\""],[0,"><fi"]],"start1":8967,"start2":8967,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"/uSsM)oKm/!LC7Z,`X(p\""],[0,"><fi"]],"start1":9069,"start2":9069,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"K^0ve?-sB1$qt{qT92!R"],[1,"nIR!gpubGu.G-H-}Sidw"],[0,"\">MO"]],"start1":9092,"start2":9092,"length1":28,"length2":28},{"diffs":[[0,"get\""],[-1," id=\"A^p~`p=.]T[dVJR+-]v%\""],[0,"><fi"]],"start1":9200,"start2":9200,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"u)n!I_XwsBX2qB`p8;J3"],[1,"qdB/@zcjbQ.4`IrN[AvV"],[0,"\">MO"]],"start1":9223,"start2":9223,"length1":28,"length2":28},{"diffs":[[0,"ber\""],[-1," id=\"5;!|(odJy]*Gwa|0XYp6\""],[0,"><fi"]],"start1":9329,"start2":9329,"length1":34,"length2":8},{"diffs":[[0,"ber\""],[-1," id=\"F6C4V_2k3n=Ro?!I$yK@\""],[0,"><fi"]],"start1":9421,"start2":9421,"length1":34,"length2":8},{"diffs":[[0,"_if\""],[-1," id=\"+9T*yiej3~z_d]{~/qz%\""],[0,"><co"]],"start1":9515,"start2":9515,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"6{DHd^?qnr},`Bg$Sh*F\""],[0,"><fi"]],"start1":9645,"start2":9645,"length1":34,"length2":8},{"diffs":[[0,"are\""],[-1," id=\"83,HOci$P=PE;8b1mKPR\""],[0,"><fi"]],"start1":9713,"start2":9713,"length1":34,"length2":8},{"diffs":[[0,"ber\""],[-1," id=\"NQ:J%(-p5z.A`te0Hr@q\""],[0,"><fi"]],"start1":9783,"start2":9783,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"z%D[jIfWCq[8%jEnP;H.\""],[0,"><fi"]],"start1":9847,"start2":9847,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">humidi"]],"start1":9866,"start2":9866,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"P?][n:wb~A9H{WuI1(MA\""],[0,"><fi"]],"start1":9966,"start2":9966,"length1":34,"length2":8},{"diffs":[[0,"set\""],[-1," id=\"6{/FJ33gQwU+I0){amHJ\""],[0,"><fi"]],"start1":10076,"start2":10076,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">humidi"]],"start1":10095,"start2":10095,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"eEF)Ba-{UD%nTWxH{1j[\""],[0,"><fi"]],"start1":10183,"start2":10183,"length1":34,"length2":8},{"diffs":[[0,"_if\""],[-1," id=\"!Ks:VmQYYBBZG}]TVbo|\""],[0,"><va"]],"start1":10279,"start2":10279,"length1":34,"length2":8},{"diffs":[[0,"ean\""],[-1," id=\"xL7x?%c1e!N0Kr5]QD_L\""],[0,"><fi"]],"start1":10326,"start2":10326,"length1":34,"length2":8},{"diffs":[[0,"are\""],[-1," id=\"HO!vIA{yRLx3HnvseNj;\""],[0,"><fi"]],"start1":10394,"start2":10394,"length1":34,"length2":8},{"diffs":[[0,"ber\""],[-1," id=\"$?F{8u~Gl5oQ|T_XB^f!\""],[0,"><fi"]],"start1":10464,"start2":10464,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"y4k@5j!WVq1cLSR:;YkS\""],[0,"><fi"]],"start1":10528,"start2":10528,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">humidi"]],"start1":10547,"start2":10547,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"qX[[WnTk}VOkgWdMfi5G\""],[0,"><fi"]],"start1":10647,"start2":10647,"length1":34,"length2":8},{"diffs":[[0,"set\""],[-1," id=\"#g3)U/HQWyOBy$@p(TNO\""],[0,"><fi"]],"start1":10759,"start2":10759,"length1":34,"length2":8},{"diffs":[[0,"AR\" id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">humidi"]],"start1":10778,"start2":10778,"length1":36,"length2":36},{"diffs":[[0,"ber\""],[-1," id=\"^Oca*u8v_M6nsbIap3_.\""],[0,"><fi"]],"start1":10866,"start2":10866,"length1":34,"length2":8},{"diffs":[[0,"urn\""],[-1," id=\"dO~6tvrv+k-bGx6x7#D-\""],[0,"><mu"]],"start1":10968,"start2":10968,"length1":34,"length2":8},{"diffs":[[0,"on><"],[-1,"value name=\"RETURN_VALUE\"><shadow type=\"math_number\" id=\"a*^9l^RftUC3t2Mi-27E\"><field name=\"NUM\">0</field></shadow><block type=\"math_js_round\" id=\"7Pv%mp@A/!F70EF#{v66\"><field name=\"OP\">round</field"],[1,"comment pinned=\"false\" h=\"80\" w=\"160\">return Math.round(humidity)</comment"],[0,"><va"]],"start1":11052,"start2":11052,"length1":206,"length2":82},{"diffs":[[0,"me=\""],[-1,"ARG0"],[1,"RETURN_VALUE"],[0,"\"><s"]],"start1":11140,"start2":11140,"length1":12,"length2":20},{"diffs":[[0,"ber\""],[-1," id=\"SImYi/8TCh0vdT6P3az9\""],[0,"><fi"]],"start1":11180,"start2":11180,"length1":34,"length2":8},{"diffs":[[0,"get\""],[-1," id=\"zt-v#DQs|Nv!czvSeLLD\""],[0,"><fi"]],"start1":11244,"start2":11244,"length1":34,"length2":8},{"diffs":[[0,"id=\""],[-1,"GiKhm$Ema#UDV;)T$1st"],[1,"%^D}nV/*n5x)*A[qyRKr"],[0,"\">hu"]],"start1":11267,"start2":11267,"length1":28,"length2":28},{"diffs":[[0,"block></"],[-1,"value></block></"],[0,"next></b"]],"start1":11327,"start2":11327,"length1":32,"length2":16}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"ité\n"],[-1,"// return humidity\n"],[0,"func"]],"start1":204,"start2":204,"length1":27,"length2":8},{"diffs":[[0,"   }\n   "],[1," //"],[0," return "]],"start1":567,"start2":567,"length1":16,"length2":19},{"diffs":[[0,"midity)\n"],[1,"    return humidity\n"],[0,"}\nlet hu"]],"start1":599,"start2":599,"length1":16,"length2":36},{"diffs":[[0,"moisture"],[-1,"Raw"],[0," = 0\nlet"]],"start1":694,"start2":694,"length1":19,"length2":16},{"diffs":[[0,"let moisture"],[1,"Raw"],[0," = 0\n// Init"]],"start1":729,"start2":729,"length1":24,"length2":27},{"diffs":[[0,"R = "],[-1,"1017"],[1,"99"],[0,"\n// "]],"start1":1016,"start2":1016,"length1":12,"length2":10},{"diffs":[[0,"ATER = 4"],[-1,"50"],[1,"7"],[0,"\n// En-t"]],"start1":1054,"start2":1054,"length1":18,"length2":17},{"diffs":[[0,"c.pause("],[-1,"5"],[1,"10"],[0,"00)\n})\n"]],"start1":2147,"start2":2147,"length1":16,"length2":17}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":224,"start2":224,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// les tests vont ici ; cela ne sera pas compilé si ce paquet est utilisé en tant qu'extension.\n"}]}],"snapshots":[{"timestamp":1737422047630,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"EARTH\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1737423857362,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"`q{Yk:)WO`uXjWRophHI\">moistureRaw</variable><variable id=\"Fw-RMyVJ1%ML?*Q@edL[\">PIN_MOISTURE</variable><variable id=\"JCe/_@$r|V`~uJYs984*\">waterDetected</variable><variable id=\"},A{(mSUSJR|Dc.9q.yq\">PIN_WATER</variable><variable id=\"p$i$Sr6.OSTRm[mOY7}L\">moisture</variable></variables><block type=\"device_forever\" x=\"547\" y=\"-48\"><comment pinned=\"false\" h=\"80\" w=\"160\">Boucle principale</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`q{Yk:)WO`uXjWRophHI\">moistureRaw</field><comment pinned=\"false\" h=\"80\" w=\"160\">Lecture des valeurs</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_analog_pin\"><value name=\"name\"><shadow type=\"analog_read_write_pin_shadow\"><field name=\"pin\">AnalogReadWritePin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Fw-RMyVJ1%ML?*Q@edL[\">PIN_MOISTURE</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"JCe/_@$r|V`~uJYs984*\">waterDetected</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"},A{(mSUSJR|Dc.9q.yq\">PIN_WATER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p$i$Sr6.OSTRm[mOY7}L\">moisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion de l'humidité</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"convertMoisture\" functionid=\"PAaE*KoWzpf*Oh)]+e`H\"><arg name=\"rawValue\" id=\"0mofvx2q5848zaqutmewe\" type=\"number\"></arg></mutation><value name=\"0mofvx2q5848zaqutmewe\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`q{Yk:)WO`uXjWRophHI\">moistureRaw</field></block></value></block></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi des données sur le port série</comment><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">moisture.toString()</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">waterDetected.toString()</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"\\n\"</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Affichage sur la matrice LED selon la présence d'eau</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"JCe/_@$r|V`~uJYs984*\">waterDetected</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></statement><statement name=\"ELSE\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Pause de 2 secondes</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">2000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"serial_setbaudrate\"><field name=\"rate\">BaudRate.BaudRate115200</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de la communication série</comment><next><block type=\"serial_writestring\"><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"Démarrage du capteur EARTH\\n\"</field></block></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><value name=\"text\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">\"Moisture,WaterDetected\\n\"</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Fw-RMyVJ1%ML?*Q@edL[\">PIN_MOISTURE</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définition des broches\nSignal analogique humidité sur P0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"analog_pin\"><field name=\"pin\">AnalogPin.P1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"},A{(mSUSJR|Dc.9q.yq\">PIN_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P1</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P0</field></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1313\" y=\"-48\"><mutation name=\"convertMoisture\" functionid=\"PAaE*KoWzpf*Oh)]+e`H\"><arg name=\"rawValue\" id=\"0mofvx2q5848zaqutmewe\" type=\"number\"></arg></mutation><field name=\"function_name\">convertMoisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P1\nFonction de conversion pour l'humidité</comment><value name=\"0mofvx2q5848zaqutmewe\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">rawValue</field></block></value><statement name=\"STACK\"><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion en pourcentage (0-100%)</comment><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">rawValue</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">1023</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value></block></statement></block></xml>","main.ts":"// Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"Démarrage du capteur EARTH\\n\")\nserial.writeString(\"Moisture,WaterDetected\\n\")\n\n// Définition des broches\nlet PIN_MOISTURE = AnalogPin.P0    // Signal analogique humidité\nlet PIN_WATER = DigitalPin.P1      // Signal digital détection d'eau\n\n// Constantes de calibration\nlet MOISTURE_AIR = 99    // Valeur dans l'air (sec)\nlet MOISTURE_WATER = 47  // Valeur dans l'eau\n\n// Fonction de conversion pour l'humidité\nfunction convertMoisture(rawValue: number): number {\n    // Conversion en pourcentage avec inversion de l'échelle\n    // et limitation entre 0 et 100%\n    let humidity = Math.map(\n        rawValue,\n        MOISTURE_AIR,    // Valeur minimale (air)\n        MOISTURE_WATER,  // Valeur maximale (eau)\n        0,              // 0% d'humidité\n        100            // 100% d'humidité\n    )\n    // Limiter les valeurs entre 0 et 100\n    if (humidity < 0) humidity = 0\n    if (humidity > 100) humidity = 100\n    return Math.round(humidity)\n}\n\n// Boucle principale\nbasic.forever(function () {\n    // Lecture des valeurs\n    let moistureRaw = pins.analogReadPin(PIN_MOISTURE)\n    let waterDetected = pins.digitalReadPin(PIN_WATER)\n\n    // Conversion de l'humidité\n    let moisture = convertMoisture(moistureRaw)\n\n    // Envoi des données sur le port série\n    serial.writeString(moisture.toString())\n    serial.writeString(\",\")\n    serial.writeString(waterDetected.toString())\n    serial.writeString(\"\\n\")\n\n    // Affichage sur la matrice LED selon le niveau d'humidité\n    if (moisture < 20) {\n        basic.showIcon(IconNames.)       // Très sec\n    } else if (moisture < 40) {\n        basic.showIcon(IconNames.Triangle) // Un peu humide\n    } else if (moisture < 60) {\n        basic.showIcon(IconNames.Square)    // Moyennement humide\n    } else if (moisture < 80) {\n        basic.showIcon(IconNames.Target)    // Humide\n    } else {\n        basic.showIcon(IconNames.Umbrella)  // Très humide\n    }\n\n    // Pause de 2 secondes\n    basic.pause(2000)\n})","README.md":"","pxt.json":"{\n    \"name\": \"EARTH\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1737425697400,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</variable><variable id=\"nIR!gpubGu.G-H-}Sidw\">MOISTURE_AIR</variable><variable id=\"qdB/@zcjbQ.4`IrN[AvV\">MOISTURE_WATER</variable><variable id=\"^g!@`nO}1_M}7sw-+zj:\">moistureRaw</variable><variable id=\"d30:vC=ck`q@n4Yrr!kY\">PIN_MOISTURE</variable><variable id=\"CK#_R4ocgM`Q@lokuNNi\">waterDetected</variable><variable id=\"v6(j#cC6JnctZe}T2uzl\">PIN_WATER</variable><variable id=\",Ov4Eqj*Yc5VTqx.w@hi\">moisture</variable></variables><comment x=\"0\" y=\"793\" w=\"420\" h=\"120\">\nSignal digital détection d'eau sur P0\nSignal analogique humidité de l'eau sur P1\nFonction de conversion pour l'humidité\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let moisture = 0\" numlines=\"1\" declaredvars=\"moisture\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let waterDetected = 0\" numlines=\"1\" declaredvars=\"waterDetected\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let moistureRaw = 0\" numlines=\"1\" declaredvars=\"moistureRaw\"></mutation><next><block type=\"serial_setbaudrate\"><field name=\"rate\">BaudRate.BaudRate115200</field><comment pinned=\"false\" h=\"80\" w=\"160\">Initialisation de la communication série</comment><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"Démarrage du capteur EARTH\\n\")</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"Moisture,WaterDetected\\n\")</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"nIR!gpubGu.G-H-}Sidw\">MOISTURE_AIR</field><comment pinned=\"false\" h=\"80\" w=\"160\">Constantes de calibration\nValeur dans l'air (sec)</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">99</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qdB/@zcjbQ.4`IrN[AvV\">MOISTURE_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Valeur dans l'eau</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">47</field></shadow></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">En-tête CSV</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"Démarrage du capteur EARTH\\n\")</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"DonnéesBrutes,TauxHumidité,DetectionEau\\n\")</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"d30:vC=ck`q@n4Yrr!kY\">PIN_MOISTURE</field><comment pinned=\"false\" h=\"80\" w=\"160\">Définition des broches\nSignal analogique humidité sur P1</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"analog_pin\"><field name=\"pin\">AnalogPin.P1</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"v6(j#cC6JnctZe}T2uzl\">PIN_WATER</field><comment pinned=\"false\" h=\"80\" w=\"160\">Signal digital détection d'eau sur P0</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"digital_pin\"><field name=\"pin\">DigitalPin.P0</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"610\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">Boucle principale</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"^g!@`nO}1_M}7sw-+zj:\">moistureRaw</field><comment pinned=\"false\" h=\"80\" w=\"160\">Lecture des valeurs</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_analog_pin\"><value name=\"name\"><shadow type=\"analog_read_write_pin_shadow\"><field name=\"pin\">AnalogReadWritePin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"d30:vC=ck`q@n4Yrr!kY\">PIN_MOISTURE</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"CK#_R4ocgM`Q@lokuNNi\">waterDetected</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_digital_pin\"><value name=\"name\"><shadow type=\"digital_pin_shadow\"><field name=\"pin\">DigitalPin.P0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"v6(j#cC6JnctZe}T2uzl\">PIN_WATER</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\",Ov4Eqj*Yc5VTqx.w@hi\">moisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion de l'humidité</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"function_call_output\"><mutation name=\"convertMoisture\" functionid=\"OuuM@QH)KnP@3;x2B-mb\"><arg name=\"rawValue\" id=\"ynsrook4rup9foq0wqkz\" type=\"number\"></arg></mutation><value name=\"ynsrook4rup9foq0wqkz\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^g!@`nO}1_M}7sw-+zj:\">moistureRaw</field></block></value></block></value><next><block type=\"serial_writestring\"><comment pinned=\"false\" h=\"80\" w=\"160\">Envoi des données sur le port série</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(moistureRaw.toString())</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(moisture.toString())</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">,</field></shadow></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(waterDetected.toString())</field></block></value><next><block type=\"serial_writestring\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\"></field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">(\"\\n\")</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Affichage sur la matrice LED selon la présence d'eau</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"CK#_R4ocgM`Q@lokuNNi\">waterDetected</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Umbrella</field></block></statement><statement name=\"ELSE\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.No</field></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Pause de 1 seconde</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"1377\" y=\"0\"><mutation name=\"convertMoisture\" functionid=\"OuuM@QH)KnP@3;x2B-mb\"><arg name=\"rawValue\" id=\"ynsrook4rup9foq0wqkz\" type=\"number\"></arg></mutation><field name=\"function_name\">convertMoisture</field><comment pinned=\"false\" h=\"80\" w=\"160\">Valeur dans l'eau\nFonction de conversion pour l'humidité</comment><data>0</data><value name=\"ynsrook4rup9foq0wqkz\"><block type=\"argument_reporter_number\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VALUE\">rawValue</field></block></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field><comment pinned=\"false\" h=\"80\" w=\"160\">Conversion en pourcentage avec inversion de l'échelle\net limitation entre 0 et 100%</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">rawValue</field></block></value><value name=\"fromLow\"><block type=\"variables_get\"><field name=\"VAR\" id=\"nIR!gpubGu.G-H-}Sidw\">MOISTURE_AIR</field></block></value><value name=\"fromHigh\"><block type=\"variables_get\"><field name=\"VAR\" id=\"qdB/@zcjbQ.4`IrN[AvV\">MOISTURE_WATER</field></block></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Limiter les valeurs entre 0 et 100</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value></block></statement><next><block type=\"function_return\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" no_return_value=\"false\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">return Math.round(humidity)</comment><value name=\"RETURN_VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%^D}nV/*n5x)*A[qyRKr\">humidity</field></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"/**\n * Signal digital détection d'eau sur P0\n * \n * Signal analogique humidité de l'eau sur P1\n * \n * Fonction de conversion pour l'humidité\n */\n// Valeur dans l'eau\n// Fonction de conversion pour l'humidité\nfunction convertMoisture (rawValue: number) {\n    // Conversion en pourcentage avec inversion de l'échelle\n    // et limitation entre 0 et 100%\n    humidity = Math.map(rawValue, MOISTURE_AIR, MOISTURE_WATER, 0, 100)\n    // Limiter les valeurs entre 0 et 100\n    if (humidity < 0) {\n        humidity = 0\n    }\n    if (humidity > 100) {\n        humidity = 100\n    }\n    // return Math.round(humidity)\n    return humidity\n}\nlet humidity = 0\nlet MOISTURE_WATER = 0\nlet MOISTURE_AIR = 0\nlet moisture = 0\nlet waterDetected = 0\nlet moistureRaw = 0\n// Initialisation de la communication série\nserial.setBaudRate(BaudRate.BaudRate115200)\nserial.writeString(\"\" + (\"Démarrage du capteur EARTH\\n\"))\nserial.writeString(\"\" + (\"Moisture,WaterDetected\\n\"))\n// Constantes de calibration\n// Valeur dans l'air (sec)\nMOISTURE_AIR = 1000\n// Valeur dans l'eau\nMOISTURE_WATER = 345\n// En-tête CSV\nserial.writeString(\"\" + (\"Démarrage du capteur EARTH\\n\"))\nserial.writeString(\"\" + (\"DonnéesBrutes,TauxHumidité,DetectionEau\\n\"))\n// Définition des broches\n// Signal analogique humidité sur P1\nlet PIN_MOISTURE = AnalogPin.P1\n// Signal digital détection d'eau sur P0\nlet PIN_WATER = DigitalPin.P0\n// Boucle principale\nbasic.forever(function () {\n    // Lecture des valeurs\n    moistureRaw = pins.analogReadPin(PIN_MOISTURE)\n    waterDetected = pins.digitalReadPin(PIN_WATER)\n    // Conversion de l'humidité\n    moisture = convertMoisture(moistureRaw)\n    // Envoi des données sur le port série\n    serial.writeString(\"\" + (moistureRaw.toString()))\n    serial.writeString(\",\")\n    serial.writeString(\"\" + (moisture.toString()))\n    serial.writeString(\",\")\n    serial.writeString(\"\" + (waterDetected.toString()))\n    serial.writeString(\"\" + (\"\\n\"))\n    // Affichage sur la matrice LED selon la présence d'eau\n    if (waterDetected == 1) {\n        basic.showIcon(IconNames.Umbrella)\n    } else {\n        basic.showIcon(IconNames.No)\n    }\n    // Pause de 1 seconde\n    basic.pause(1000)\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"EARTH\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1737425989987}